{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"React\"","webpack:///external \"ReactDOM\"","webpack:///./react/src/components/main-imageboard-contents/Thread.tsx","webpack:///./react/src/index.tsx","webpack:///./react/src/components/Hello.tsx","webpack:///./react/src/components/MainImageboardContents.tsx","webpack:///./react/src/components/main-imageboard-contents/DeleteForm.tsx","webpack:///./react/src/components/main-imageboard-contents/Post.tsx","webpack:///./react/src/components/main-imageboard-contents/ThreadUpdater.tsx","webpack:///./react/src/components/main-imageboard-contents/Page.tsx","webpack:///./react/src/components/main-imageboard-contents/DeleteButton.tsx","webpack:///./react/src/components/main-imageboard-contents/ReportButton.tsx","webpack:///./react/src/components/main-imageboard-contents/OptionMenu.tsx","webpack:///../webpack/universalModuleDefinition","webpack:///../webpack/bootstrap","webpack:///../node_modules/prop-types/index.js","webpack:///../external {\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\",\"root\":\"React\"}","webpack:///../external {\"commonjs\":\"react-dom\",\"commonjs2\":\"react-dom\",\"amd\":\"react-dom\",\"root\":\"ReactDOM\"}","webpack:///../node_modules/classnames/index.js","webpack:///../lib/cjs.js","webpack:///../node_modules/prop-types/factoryWithThrowingShims.js","webpack:///../node_modules/prop-types/lib/ReactPropTypesSecret.js","webpack:///../lib/utils/shims.js","webpack:///../lib/utils/getPrefix.js","webpack:///../lib/utils/domFns.js","webpack:///../lib/utils/positionFns.js","webpack:///../lib/DraggableCore.js","webpack:///../lib/Draggable.js","webpack:///./react/src/components/main-imageboard-contents/NavButtons.tsx"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","React","ReactDOM","Thread","Component","props","super","stored_title","total_posts_in_thread","total_posts_mounted","this","document","title","setThreadPostsFetched","setThreadPostsPreFetched","rebuildThreadOnBool","maintainCountOfAllPostsMounted","highlightThreadPost","threadQuickReply","getThreadJSONData","returnPostJSXObject","defineStatePostsArray","state","spaced_posts","error","expanded","e","id","copy_ele","post","thread_id","preventDefault","push","cloneElement","highlighted","history","pushState","window","location","pathname","search","setState","paged","finishedCallBackFunction","thread_json","posts_arr","forEach","post_obj","index","length","display_notification_event","board","then","recieved","JSON","parse","new_posts","catch","err","console","log","Promise","resolve","reject","thread_req","XMLHttpRequest","addEventListener","re","status","response","open","send","post_details","hierarchy_class","threadReconstruct","threadHighlighting","op_id","sub","com","email","capcode","time","sticky","locked","cyclical","spoiler","sage","last_modified","tn_h","tn_w","h","w","fsize","filename","ext","tim","embed","md5","bumplimit","imagelimit","cites","omitted_posts","Post","posts","spaced_list","post_ind","thread_updater_props","threadListUpdateSignal","className","localStorage","ThreadUpdater","renderTest","render","Hello","getElementById","renderThread","id_num","board_str","MainImageboardContents","page","renderPage","page_num","time_of_last_rebuild","Date","now","options","time_since_last_update","information_holder_ref","createRef","confirmUpdateClick","sendDoneEvents","optionSetRebuild","mounted","mounted_event","CustomEvent","body","dispatchEvent","style","cursor","post_id","current","triggerRebuild","recent_thread_time","delete_form_properties","doneEventCallBack","NavButtons","time_string","OptionMenu","optionSetCallBack","DeleteForm","ref","display_user_moderation_tools","paged_rebuild_ref","thread_rebuild_ref","setPageThreads","thread_options","page_options","action","method","type","Page","float","onClick","DeleteButton","ReportButton","generateProperMedia","generateStagedEmbeding","onClickExpandImage","onClickExpandAudio","onClickExpandVideo","onClickExpandEmbed","onMediaLoad","filename_cutoff","file_details_hidden","show_full_image","show_full_audio","show_full_video","show_full_embed","media_opacity","unsafe_body","xss_protect_cookie_and_localStorage","__html","replace","dangerouslySetInnerHTML","fname","substr","textarea","undefined","selection","focus","createRange","text","selectionStart","start","end","selectionEnd","substring","$","select","getSelection","toString","find","indexOf","trigger","change","toFixed","cap_type","createCapCode","parsed_email","split","classes","item","href","ms_time","getHours","padStart","getMinutes","getSeconds","is_file","is_embed","textDecoration","target","getDate","getMonth","getFullYear","search_engine_name","search_engine_pattern","source","protocol","hostname","search_url","cite_arr","return_jsx","cite","host","is_image","is_video","is_audio","onLoad","src","opacity","image_thumb_src","width","height","paddingLeft","display","position","alt","marginLeft","loop","pointerEvents","maxHeight","controls","autoPlay","dangerous_html","getEmbedThumb","getSRCFromIframe","url","code_match","exec","embed_string","embed_match","match","detail_display_prop","hash","htmlFor","parseEmailNameField","readableDate","detailsExpander","readableTime","event","highlightReply","citeReply","createCitesList","createImageSearchLink","shortenFileName","formatFileSize","parsePostBodyIntoSafeJSX","triggerThreadRebuild","timer_increment","timer_repetitions","fireUpUpdater","timer_seconds","timer","setInterval","countDown","clearInterval","count_of_all_threads_on_page","count_of_all_threads_mounted","getPagedJSONData","returnThreadJSXObject","defineStateThreadsArray","maintainCountOfAllThreads","spaced_threads","paged_json","threads_arr","thread_obj","reply_id","thread_details","threads","thread_ind","threads_req","show_menu","grab_pointer","toggle_options","toggleShowMenu","setOptionLocalStore","setItem","checked","handle","onMouseDown","onMouseUp","unselectable","defaultChecked","disabled","__WEBPACK_EXTERNAL_MODULE__1__","__WEBPACK_EXTERNAL_MODULE__2__","require","hasOwn","classNames","arguments","arg","argType","Array","isArray","inner","apply","join","default","Draggable","DraggableCore","ReactPropTypesSecret","emptyFunction","emptyFunctionWithReset","resetWarningCache","shim","propName","componentName","propFullName","secret","Error","getShim","isRequired","ReactPropTypes","array","bool","func","number","string","symbol","any","arrayOf","element","elementType","instanceOf","node","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","PropTypes","findInArray","callback","isFunction","isNum","num","isNaN","int","a","parseInt","dontSetMe","prefixes","browserPrefixToKey","prop","prefix","str","out","shouldCapitalize","toUpperCase","getPrefix","documentElement","matchesSelectorFunc","matchesSelector","el","selector","matchesSelectorAndParentsTo","baseNode","parentNode","addEvent","handler","attachEvent","removeEvent","detachEvent","removeEventListener","outerHeight","clientHeight","computedStyle","ownerDocument","defaultView","getComputedStyle","borderTopWidth","borderBottomWidth","outerWidth","clientWidth","borderLeftWidth","borderRightWidth","innerHeight","paddingTop","paddingBottom","innerWidth","paddingRight","getTranslation","positionOffset","unitSuffix","x","y","translation","defaultX","defaultY","addUserSelectStyles","doc","styleEl","createElement","innerHTML","getElementsByTagName","appendChild","classList","add","RegExp","removeUserSelectStyles","remove","empty","removeAllRanges","styleHacks","touchAction","canDragX","draggable","axis","canDragY","getControlPosition","touchIdentifier","draggableCore","touchObj","identifier","targetTouches","changedTouches","findDOMNode","evt","offsetParent","scale","offsetParentRect","left","top","getBoundingClientRect","clientX","scrollLeft","clientY","scrollTop","createCoreData","isStart","lastX","deltaX","deltaY","lastY","createDraggableData","coreData","eventsFor","move","stop","dragEventFor","dragging","NaN","allowAnyClick","button","thisNode","Node","cancel","coreEvent","onStart","enableUserSelectHack","handleDrag","handleDragStop","grid","pendingX","pendingY","Math","round","onDrag","MouseEvent","createEvent","initMouseEvent","onStop","handleDragStart","Children","only","children","onTouchStart","onTouchEnd","nodeType","transform","dragged","uiData","newState","bounds","slackX","slackY","right","bottom","boundNode","ownerWindow","querySelector","HTMLElement","nodeStyle","boundNodeStyle","offsetLeft","offsetTop","marginTop","marginRight","marginBottom","min","max","newStateX","newStateY","Boolean","defaultPosition","prevPropsPosition","isElementSVG","warn","SVGElement","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","draggableCoreProps","svgTransform","validPosition","transformOpts","controlPos","browserPrefix","onDragStart","onDragStop","propTypes","defaultProps","checkThreadUpdates","fetchThreadTimeJSON","max_time","json_el","floor","xhr_thread_details"],"mappings":"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","file":"ui-bundle(0.1).js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","module.exports = React;","module.exports = ReactDOM;","import * as React from \"react\";\nimport {Post, PostProperties} from \"./Post\";\nimport {ThreadUpdater, ThreadUpdaterProperties} from \"./ThreadUpdater\";\n\nexport type ThreadProperties = {\n    board:string,\n    thread_id: any, // typescript bizzarely not letting me set this as number\n    paged: any,\n\n    threadQuickReply: (thread_id:number, post_id:number)=>void,\n    finishedCallBackFunction: ()=>void\n}\n\ntype ThreadVariables = {\n\tspaced_posts:JSX.Element[],\n\n\terror:string,\n\texpanded:boolean // stores past directive on thread expantion\n}\n\n// FIX: expansion doesn't updates the paged property when new treads have been added.\nexport class Thread extends React.Component<ThreadProperties, ThreadVariables>{\n\t\n\tstored_title:string = \"\";\n\ttotal_posts_in_thread:number = 0;\n\ttotal_posts_mounted:number = 0;\n\n\n\tconstructor(props:any){\n\t  super(props);\n\n\t  this.stored_title = document.title;\n\n\t  this.setThreadPostsFetched = this.setThreadPostsFetched.bind(this);\n\t  this.setThreadPostsPreFetched = this.setThreadPostsPreFetched.bind(this);\n\t  this.rebuildThreadOnBool = this.rebuildThreadOnBool.bind(this);\n\t  this.maintainCountOfAllPostsMounted = this.maintainCountOfAllPostsMounted.bind(this);\n\t  this.highlightThreadPost = this.highlightThreadPost.bind(this);\n \t  this.threadQuickReply = this.threadQuickReply.bind(this);\n\n\t  this.getThreadJSONData = this.getThreadJSONData.bind(this);\n\t  this.returnPostJSXObject = this.returnPostJSXObject.bind(this);\n\t  this.defineStatePostsArray = this.defineStatePostsArray.bind(this);\n\n\t  this.state = {spaced_posts:[], error:null, expanded: false};\n\t}\n\n\thighlightThreadPost(e:React.MouseEvent<HTMLAnchorElement, MouseEvent>, id:number){\n\t\tvar copy_ele:JSX.Element[] = [];\n\t\tfor (var post of this.state.spaced_posts){\n\t\t\tif(post.props.thread_id){\n\t\t\t\tif(id == post.props.id){\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tcopy_ele.push(React.cloneElement(post, {highlighted:!post.props.highlighted}));\n\t\t\t\t\thistory.pushState(\"\", document.title, window.location.pathname + window.location.search);\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tcopy_ele.push(React.cloneElement(post, {highlighted:false}));\n\t\t\t\t}\n\t\t\t}\n\t\t\telse{\n\t\t\t\tcopy_ele.push(post);\n\t\t\t}\n\t\t}\n\t\tthis.setState({spaced_posts: copy_ele});\n\t}\n\n\tcomponentDidMount(){\n\t\tif(!this.props.paged){\n\t\t\tthis.setThreadPostsFetched();\n\t\t}\n\t\telse{\n\t\t\tthis.setThreadPostsPreFetched(this.props.paged);\t\n\t\t}\n\t}\n\n\tmaintainCountOfAllPostsMounted(){\n\t\tthis.total_posts_mounted++;\n\t\tif(this.total_posts_mounted == this.total_posts_in_thread){\n\t\t\tthis.props.finishedCallBackFunction();\n\t\t}\n\t}\n\n\trebuildThreadOnBool(){\n\t\tthis.setState({expanded: !this.state.expanded});\n\t\tif(! this.state.expanded){ // naming is a bit confusing\n\t\t\tthis.setThreadPostsFetched();\n\t\t}\n\t\telse{\n\t\t\tthis.setThreadPostsPreFetched(this.props.paged);\n\t\t}\n\t}\n\t\t\n\tthreadQuickReply(id:number){\n\t\tthis.props.threadQuickReply(this.props.thread_id, id);\t\n\t}\t\n\n\tsetThreadPostsPreFetched(thread_json:any){\n\t\tvar posts_arr:JSX.Element[] = [];\n\t\tthread_json.forEach((post_obj:any, index:number)=>{\n\t\t\tposts_arr.push(this.returnPostJSXObject(post_obj, index));\t\t\n\t\t});\n\t\tthis.total_posts_in_thread = posts_arr.length;\n\t\tthis.total_posts_mounted = 0;\n\t\tthis.defineStatePostsArray(posts_arr);\n\t}\n\n\tasync setThreadPostsFetched(display_notification_event:boolean = false){\n\t\tthis.getThreadJSONData(this.props.board, this.props.thread_id)\n\t\t   .then((recieved:string) => {\n\t\t\tvar thread_json = JSON.parse(recieved);\n\t\t\tvar posts_arr:JSX.Element[] = [];\n\t\t\tvar max_ind = 0;\n\t\t\tthread_json[\"posts\"].forEach((post_obj:any, index:number)=>{\n\t\t\t\tmax_ind = index;\n\t\t\t\tposts_arr.push(this.returnPostJSXObject(post_obj, index));\t\t\n\t\t\t});\n\n\t\t\tthis.total_posts_in_thread = posts_arr.length;\n\t\t\tthis.total_posts_mounted = 0;\n\n\t\t\tif(display_notification_event){\n\t\t\t\tvar new_posts = (thread_json['posts'].length - this.state.spaced_posts.length / 2);\t\n\t\t\t\tif(new_posts != 0)\n\t\t\t\t\tdocument.title = \"(\" + new_posts + \") \" + this.stored_title;\n\t\t\t}\n\t\t\tthis.defineStatePostsArray(posts_arr);\n\t\t   })\n \t\t   .catch((err)=>{\n\t\t\tconsole.log(err)\n\t\t       this.setState({error: err + \"\\nJSON fetch error\"});\n\t\t });\n\t}\n\n\tgetThreadJSONData(board:string, id:string){\n\t\treturn new Promise((resolve, reject) => {\t\n\t\t\tvar thread_req = new XMLHttpRequest();\n\t\t\tthread_req.addEventListener(\"load\", function(re:ProgressEvent<XMLHttpRequestEventTarget>){\n\t\t\t\tif(this.status >= 300){\n\t\t\t\t\treject(this.status);\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tresolve(this.response);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthread_req.addEventListener(\"error\", function(err:ProgressEvent<XMLHttpRequestEventTarget>){\n\t\t\t\treject(this.status);\n\t\t\t})\n\t\t\tthread_req.open(\"GET\", `/${board}/res/${id}.json`);\t\n\t\t\tthread_req.send();\n\t\t});\n\t}\n\n\treturnPostJSXObject(post_obj:any, key:number):JSX.Element{\n\t\tvar post_details:PostProperties = {\n\t\t\thierarchy_class: (post_obj['resto'] == 0 ? \"op\" : \"reply\"),\n\t\t\tpaged: typeof this.props.paged != 'boolean',\n\t\t\texpanded: this.state.expanded,\n\t\t\thighlighted:false,\n\t\t\tthreadReconstruct:this.rebuildThreadOnBool,\n\t\t\tthreadHighlighting:this.highlightThreadPost,\n\t\t\tthreadQuickReply:this.threadQuickReply,\n\t\t\tfinishedCallBackFunction:this.maintainCountOfAllPostsMounted,\n\t\t\n\t\t\tboard: this.props.board,\n\t\t\tid: post_obj['no'],\n\t\t\top_id:(post_obj['resto'] == false ? post_obj['no'] : post_obj['resto']) ,\n\t\t\tkey: key * 2,\n\t\t\tsub: post_obj['sub'],\n\t\t\tcom: post_obj['com'],\n\t\t\temail: post_obj['email'],\n\t\t\tname:post_obj['name'],\n\t\t\tcapcode:post_obj['capcode'],\n\t\t\ttime:post_obj['time'],\n\t\t\tsticky: post_obj['sticky'],\n\t\t\tlocked: post_obj['locked'],\n\t\t\tcyclical: post_obj['cyclical'],\n\t\t\tspoiler: post_obj['spoiler'],\n\t\t\tsage: post_obj['sage'],\n\t\t\tlast_modified: post_obj['last_modified'],\t\n\t\t\ttn_h:post_obj['tn_h'],\n\t\t\ttn_w:post_obj['tn_w'],\n\t\t\th:post_obj['h'],\n\t\t\tw:post_obj['w'],\n\t\t\tfsize:post_obj['fsize'],\n\t\t\tfilename:post_obj['filename'],\n\t\t\text:post_obj['ext'],\n\t\t\ttim:post_obj['tim'],\n\t\t\tembed:post_obj['embed'],\n\t\t\tmd5:post_obj['md5'],\n\t\t\tbumplimit:post_obj['bumplimit'],\n\t\t\timagelimit:post_obj['imagelimit'],\n\t\t\tcites: post_obj['cites'],\n\t\t\tomitted_posts:post_obj['omitted_posts']\n\t\t};\n\t\treturn <Post {...post_details}/>;\n\t}\n\n\tdefineStatePostsArray(posts:JSX.Element[]){\n\t\tvar spaced_list:JSX.Element[] = [];\n\t\tfor(var post_ind = 0 ; post_ind < posts.length ; post_ind++){\n\t\t  spaced_list = [...spaced_list, posts[post_ind]]\n\t\t  spaced_list = [...spaced_list, <br key={(post_ind+1) * 2 - 1}/>]\n\t\t}\n\t\tthis.setState({spaced_posts: spaced_list});\n\t}\n\t\n\trender(){\n\t\tif(this.state.error)\n\t\t\treturn (<p>{this.state.error}</p>)\n\t\t\n\t\tvar thread_updater_props:ThreadUpdaterProperties =\n\t\t\t {board: this.props.board, \n\t\t\t  thread_id:this.props.thread_id, \n\t\t\t   threadListUpdateSignal:this.setThreadPostsFetched}\n\t\t\n\t\treturn (\n\t\t\t<div id={\"thread_\" + this.props.thread_id} className=\"thread\" data-board={this.props.board} data-full-i-d={this.props.board + \".\" + this.props.thread_id}>\n\t  \t\t   { this.state.spaced_posts } \n\t\t\t   {!this.props.paged && localStorage['auto-up'] == \"true\" && <div className=\"bottom-page-modifiers\"><hr/><ThreadUpdater {...thread_updater_props} /></div>}\n\t\t\t</div>);// quantity of paged and rendered posts should vary on configuration\n\t}\n}\n","// This file should not do anything. It's a library\n// It is to access react transpiled functions\n// code under MPL\n\nvar React = require('react');\nvar ReactDOM = require('react-dom');\n\nimport {Hello} from \"./components/Hello\";\n// A composite of posts\nimport {Post} from \"./components/main-imageboard-contents/Post\";\n// A composite of posts\nimport {Thread} from \"./components/main-imageboard-contents/Thread\";\n// A composite of threads\nimport {Page} from \"./components/main-imageboard-contents/Page\";\n// A composite of pages\nimport {Catalog} from \"./components/main-imageboard-contents/Catalog\";\n// The master thread container \nimport {DeleteForm} from \"./components/main-imageboard-contents/DeleteForm\";\n\n// The master contents container \nimport {MainImageboardContents} from \"./components/MainImageboardContents\";\n\n\n// Use library solution to render elements through inline HTML\nmodule.exports = {\n  renderTest: function (id: string) {\n    console.log('run from library - ' + id);\n\tReactDOM.render(<Hello/>, document.getElementById(id));\n  },\n  // the two functions are for the sake of testing purposes only\n  renderThread: function(id_num:number, board_str:string){\n\tconsole.log(\"qtest \" + id_num);\n\tReactDOM.render(<MainImageboardContents thread_id={id_num} board={board_str} paged={false} page={0}/>, document.getElementById(\"react-ui\"));\n  },\n  renderPage: function(page_num:number, board_str:string){\n   \tconsole.log(\"ptest \" + page_num + \" \" + board_str)\n\tReactDOM.render(<MainImageboardContents thread_id={0} board={board_str} paged={true} page={page_num}/>, document.getElementById(\"react-ui\"));\n  }\n}\n","import * as React from \"react\";\n\nexport class Hello extends React.Component{\nrender(){\nreturn <h1>Hello fromand!</h1>;\n}\n}\n// test\n","// This file contains information components such as the post form, page navigation, catalog, threads, posts, delete form and images. At current time it probably does not include everything listed, but these are the plans\n// Cursor change is set in delete form which also handles outside events.\n\nimport * as React from \"react\";\n\n\n// Where threads and delete fields are placed\nimport {DeleteForm, DeleteFormProperties} from \"./main-imageboard-contents/DeleteForm\";\n// QR form\nimport {QuickReply, QuickReplyProperties} from \"./main-imageboard-contents/QuickReply\";\n// Options menu\nimport {OptionMenu, OptionMenuProperties} from \"./main-imageboard-contents/OptionMenu\";\n// Update and local navigation\nimport {NavButtons, NavButtonProperties} from \"./main-imageboard-contents/NavButtons\";\n\nexport type MainImageboardContentsProperties = {\n\tboard:string,\n\tthread_id:any,\n\tpage: number,\n\tpaged: any\n}\n\ntype MainImageboardContentsVariables = {\n\toptions:object,\n\ttime_since_last_update:string\n}\n\n// TODO: this component should retrieve properties for nav and passdown\nexport class MainImageboardContents extends React.Component<MainImageboardContentsProperties, MainImageboardContentsVariables>{\n\n\tinformation_holder_ref: React.RefObject<DeleteForm>; \n\tmounted:boolean;\t\n\ttime_of_last_rebuild:number = Date.now();\n\n\tconstructor(props:any){\n\t\tsuper(props);\n\n\t\tthis.state = {options:{}, time_since_last_update:\"\"};\n\t\tthis.information_holder_ref = React.createRef();\n\n\t\tthis.confirmUpdateClick = this.confirmUpdateClick.bind(this);\n\t\tthis.sendDoneEvents = this.sendDoneEvents.bind(this);\n\t\tthis.optionSetRebuild = this.optionSetRebuild.bind(this);\n\t\tthis.mounted = false;\n\t}\t\n\n\tcomponentDidMount(){\n\t\t\n\t}\n\n\tsendDoneEvents(){\n\t\tvar mounted_event = new CustomEvent('mounted');\n\n\t\t//tester\n\t\tdocument.body.addEventListener('mounted', function(r:CustomEvent){console.log(r)});\n\t\tdocument.body.addEventListener('likely-rendered', function(r:CustomEvent){console.log(r)});\t\n\n\t\tdocument.body.dispatchEvent(mounted_event);\n\t\tdocument.body.style.cursor=\"default\";\n\n\t\tthis.mounted = true;\t\n\t}\n\n\n\tcreateQuickReply(thread_id:number, post_id:number){}\n\n\toptionSetRebuild(){\n\n\t\tthis.information_holder_ref.current.triggerRebuild();\n\t}\n\n\tconfirmUpdateClick(time_since_last_update:string, recent_thread_time:number){\n\t\t// pass down new time since last update\n\t\tif(this.mounted && recent_thread_time > this.time_of_last_rebuild / 1000){\n\t\t\tthis.information_holder_ref.current.triggerRebuild();\n\t\t\tthis.time_of_last_rebuild = recent_thread_time;\t\t\n\t\t}\n\t\tthis.setState({time_since_last_update: time_since_last_update});\n\t}\n\t\n\trender(){\n\t\tvar delete_form_properties:DeleteFormProperties = {\n\t\t\tboard: this.props.board, \n\t\t\tthread_id:this.props.thread_id,\n\t\t\tpage:this.props.page,\n\t\t\tpaged: this.props.paged,\n\t\t\tdoneEventCallBack: this.sendDoneEvents\n\t\t}\n\n\t\treturn (<div id=\"main-imageboard-contents\">\n\t\t\t   <hr />\n\t\t\t\t<NavButtons paged={!!this.props.paged} board={this.props.board} confirmUpdateClick={this.confirmUpdateClick} time_string={this.state.time_since_last_update}/> \n\t\t\t\t\t<OptionMenu optionSetCallBack={this.optionSetRebuild}/>\n \t\t\t   <br/><hr />\n\t\t\t\t<DeleteForm {...delete_form_properties} ref={this.information_holder_ref}/>\n\t\t\t    \t<NavButtons paged={this.props.paged} board={this.props.board} confirmUpdateClick={this.confirmUpdateClick} time_string={this.state.time_since_last_update}/>\n\t\t\t</div>)\t\n\t}\n} \n","import * as React from \"react\";\n\n// A composite of posts\nimport {Thread, ThreadProperties} from \"./Thread\";\n// A composite of threads\nimport {Page, PageProperties} from \"./Page\";\nimport {DeleteButton, DeleteButtonProperties} from \"./DeleteButton\";\nimport {ReportButton, ReportButtonProperties} from \"./ReportButton\";\n\n\nexport type DeleteFormProperties = {\n\tpaged:boolean,\n\tboard:string,\n\n\t// on condition of not paged\n\tthread_id:number,\n\t// on condition of is paged\n\tpage: number,\n\n\tdoneEventCallBack:()=>void\n};\n\ntype DeleteFormVariables = {\n\tdisplay_user_moderation_tools:boolean;\n};\n\nexport class DeleteForm extends React.Component<DeleteFormProperties, DeleteFormVariables>{\n\t\n\tpaged_rebuild_ref: React.RefObject<Page>;\n\tthread_rebuild_ref: React.RefObject<Thread>;\n\n\tconstructor(props:any){\n\t\tsuper(props);\n\n\t\tthis.state = ({display_user_moderation_tools: false})\n\n\t\tthis.threadQuickReply = this.threadQuickReply.bind(this);\n\t\t\n\t\tthis.paged_rebuild_ref = React.createRef();\n\t\tthis.thread_rebuild_ref = React.createRef();\n\t}\n\t\n\tthreadQuickReply(thread_id:number, post_id:number){\n\t   console.log(thread_id);\n\t   console.log(post_id);\n\t\t// keep passing up to top\n\t}\n\n\t// ref function\n\ttriggerRebuild(){\n\t\tif(this.props.paged){\n\t\t\tthis.paged_rebuild_ref.current.setPageThreads();\n\t\t}\n\t\telse{\n\t\t\tthis.thread_rebuild_ref.current.setThreadPostsFetched();\n\t\t}\n\t}\n\n\tcomponentDidMount(){\n\t\tdocument.body.style.cursor=\"wait\";\n\t}\n\n\trender(){\n\t\tvar thread_options:ThreadProperties = {\n\t\t    board: this.props.board,\n\t\t    thread_id: this.props.thread_id,\n\t\t    paged: false,\n\n\t\t    threadQuickReply: this.threadQuickReply,\n\t\t    finishedCallBackFunction: this.props.doneEventCallBack\n\t\t}\n\n\t\tvar page_options:PageProperties = {\n\t\t    board: this.props.board,\n\t\t    page: this.props.page,\n\n\t\t    finishedCallBackFunction: this.props.doneEventCallBack\n\t\t}\n\n\t\t// decide which type of thread display to use. \n\t\t// some modifications will be made to this when the post form is integrated\n\t\t// qr sould not be here nor should navigation items, but for now they are.\n\t\t// it also should contains delete info\n\t\treturn (<form id=\"thread_form\" name=\"postcontrols\" action=\"/post.php\" method=\"post\">\n\t\t\t<input type=\"hidden\" name=\"board\" value={ this.props.board } />\n\t\t\t{!this.props.paged && <Thread {...thread_options} ref={this.thread_rebuild_ref} />}\n\t\t\t{this.props.paged && <Page {...page_options} ref={this.paged_rebuild_ref} />}\n\t\t\t<a style={{cursor:\"pointer\", float:\"right\"}} onClick={() => this.setState({display_user_moderation_tools: !this.state.display_user_moderation_tools})}>Toggle Moderation</a> <br/>\n\t\t\t<div className=\"user-mod-container\">\n\t\t\t\t{this.state.display_user_moderation_tools &&\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<DeleteButton /><br/>\n\t\t\t\t\t\t<ReportButton />\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t</div>\n\t\t</form>)\n\t}\n}\n","import * as React from \"react\";\n\nexport type PostProperties = {\n// properties\n\thierarchy_class:string,\n\tpaged:boolean, // a check for if you're in a thread page or not\n\texpanded: boolean, // a check for if thread has been expanded in page mode or not, default false if in thread\n\tboard:string,\n\tid:number,\n\top_id:number,\n\tkey:number,\n\thighlighted:boolean,\n\n// callbacks\n\tthreadReconstruct:()=>void,\n\tthreadHighlighting:(event: React.MouseEvent<HTMLAnchorElement, MouseEvent>, id:number)=>void,\n\tthreadQuickReply:(id:number)=>void,\n\tfinishedCallBackFunction:()=>void,\n\n// json - no & resto already defined\n\tsub:string,\n\tcom:string,\n\temail:string,\n\tname:string,\n\tcapcode:string,\n\ttime:number,\n\tsticky:number,\n\tlocked:number,\n\tcyclical:number,\n\tspoiler:number,\n\tsage:number,\n\tlast_modified:number,\n\ttn_h:number,\n\ttn_w:number,\n\th:number,\n\tw:number,\n\tfsize:number,\n\tfilename:string,\n\text:string,\n\ttim:string,\n\tembed:string,\n\tmd5:string,\n\tbumplimit:number,\n\timagelimit:number,\n// conditional\n\tcites:any[],\n\tomitted_posts:number,\n}\n\ntype PostDetails = {\n\t// options\n\tfilename_cutoff:number,\n\tfile_details_hidden:boolean;\n\tshow_full_image:boolean,\n\tshow_full_audio:boolean,\n\tshow_full_video:boolean,\n\tshow_full_embed:boolean,\n\n\tmedia_opacity:number\n}\n\n\n\n// TODO: Class should make use of conditionals on every state and render given information iff user permits it or is default based on localstore values.\n// TODO: Retrieve JSON Data\n// TODO: Use JSON Data\n// TODO: Add in default sauce\n// TODO: User creation of sauce sources\n// TODO: Replicate default intro click functions\n// TODO: Replicate/Integrate 4chanX functions\n\t// - Dropdown Hide+Filter\n\t// - Thread hiding button\n\n// TODO: When this is used in Threads.tsx states will have to move to properties where applicable\n// TODO: Ommited field be set by options\n\nexport class Post extends React.Component<PostProperties, PostDetails>{\n\tpost_json:string;\n\n\tconstructor(props:any){\n\t\tsuper(props);\n\t\tthis.generateProperMedia = this.generateProperMedia.bind(this);\n\t\tthis.generateStagedEmbeding = this.generateStagedEmbeding.bind(this);\n\t\tthis.onClickExpandImage = this.onClickExpandImage.bind(this);\n\t\tthis.onClickExpandAudio = this.onClickExpandAudio.bind(this);\n\t\tthis.onClickExpandVideo = this.onClickExpandVideo.bind(this);\n\t\tthis.onClickExpandEmbed = this.onClickExpandEmbed.bind(this);\n\t\tthis.onMediaLoad = this.onMediaLoad.bind(this);\n\t\tthis.state = ({filename_cutoff:20, file_details_hidden:localStorage['file-info'] == \"false\", show_full_image: false, show_full_audio:false, show_full_video:false,\n\t\t\t\tshow_full_embed:false,  media_opacity:1.0})\n\t}\n\n\t//this post better be done\n\tcomponentDidMount(){\n\t\tthis.props.finishedCallBackFunction();\n\t}\n\n\tonClickExpandImage(e:React.MouseEvent<HTMLImageElement, MouseEvent>){\n\t\te.preventDefault();\n\t\tthis.setState({media_opacity:0.8});\n\t\tthis.setState({show_full_image: !this.state.show_full_image});\n\t}\n\tonClickExpandAudio(e:React.MouseEvent<HTMLImageElement, MouseEvent>){\n\t\te.preventDefault();\n\t\tthis.setState({media_opacity:0.8});\n\t\tthis.setState({show_full_audio: !this.state.show_full_audio});\n\t}\n\tonClickExpandVideo(e:React.MouseEvent<HTMLImageElement, MouseEvent>){\n\t\te.preventDefault();\n\t\tthis.setState({media_opacity:0.8});\n\t\tthis.setState({show_full_video: !this.state.show_full_video});\n\t}\n\tonClickExpandEmbed(e:React.MouseEvent<HTMLImageElement, MouseEvent>){\n\t\te.preventDefault();\n\t\tthis.setState({media_opacity:0.8});\n\t\tthis.setState({show_full_embed: !this.state.show_full_embed});\n\t}\n\n\tonMediaLoad(){\n\t\tthis.setState({media_opacity:1.0});\n\t}\n\n\t// taking the json data for body field, parse string and create JSX elements for safe tags such as <a>, <br>\n\t// the raw json should already be safe from the server, however can never be too sure and makes for crearer render insertion\n\t// current method prevents localstore and cookie being called from inline scripting\n\tparsePostBodyIntoSafeJSX(unsafe_body:string){\n\t\tunsafe_body = unsafe_body.replace(/cookie/g, \"c&#111;&#111;kie\");\n\t\tvar safe_body = unsafe_body.replace(/localStorage/g, \"l&#111;calSt&#111;rage\");\n\t\tvar xss_protect_cookie_and_localStorage = {__html: safe_body};\n\t\treturn (<div dangerouslySetInnerHTML={xss_protect_cookie_and_localStorage}></div>);\n\t}\n\n\tshortenFileName(fname:string){\n\t\tif(fname.length > this.state.filename_cutoff)\n\t\t\treturn fname.substr(0,this.state.filename_cutoff) + \"..\";\n\t\telse\n\t\t\treturn fname;\n\t}\n\n\thighlightReply(e:React.MouseEvent<HTMLAnchorElement, MouseEvent>, id:number){\n\t\tthis.props.threadHighlighting(e, id);\n\t}\n\tciteReply(id:number){\n\t\tthis.props.threadQuickReply(id);\n\n/* The Following is a messy copy past from main.js */\n// JQUERY types local has been added but should be removed\n\tvar textarea:any;\n\tvar with_link = undefined;\n\tif(document.getElementById('index-body') != undefined)\n\t\ttextarea = document.getElementById('index-body');\n\telse\n        \ttextarea = document.getElementById('body');\n\tif (!textarea){\n\t\t return false;\n\t}\n\tif ((document as any).selection) {\n\t\t// IE\n\t\ttextarea.focus();\n\t\tvar sel = (document as any).selection.createRange();\n\t\tsel.text = '>>' + id + '\\n';\n\t} else if (textarea.selectionStart || textarea.selectionStart == 0) {\n\t\tvar start = textarea.selectionStart;\n\t\tvar end = textarea.selectionEnd;\n\t\ttextarea.value = textarea.value.substring(0, start) + '>>' + id + '\\n' + textarea.value.substring(end, textarea.value.length);\n\n\t\ttextarea.selectionStart += ('>>' + id).length + 1;\n\t\ttextarea.selectionEnd = textarea.selectionStart;\n\t} else {\n\t\t// ???\n\t\ttextarea.value += '>>' + id + '\\n';\n\t}\n\tif (typeof $ != 'undefined') {\n\t\tvar select = document.getSelection().toString();\n\t\tif (select) {\n\t\t\tvar body = $('#reply_' + id + ', #op_' + id).find('div.body');  // TODO: support for OPs\n\t\t\tvar index = body.text().indexOf(select.replace('\\n', ''));  // for some reason this only works like this\n\t\t\tif (index > -1) {\n\t\t\t\ttextarea.value += '>' + select + '\\n';\n\t\t\t}\n\t\t}\n\n\t\t$(window).trigger('cite', [id, with_link]);\n\t\t$(textarea).change();\n\t}\n\treturn false;\n\t// END MESS\n\t}\n\tformatFileSize(fsize:number){\n\t\tif(fsize / (1024 * 1024) > 1){ // MB size check\n\t\t\treturn (fsize / (1024*1024)).toFixed(2) + \"MB\";\n\t\t}\n\t\telse if(fsize / 1024 > 1){ // KB size check\n\t\t\treturn (fsize / (1024)).toFixed(2) + \"KB\";\n\t\t}\n\t\telse{ // Byte Default\n\t\t\treturn (fsize) + \"B\";\n\t\t}\n\t}\n\n\tcreateCapCode(name:string, cap_type:string):JSX.Element{\n\t\tswitch(cap_type){\n\t\t\tcase \"Admin\": return <span className=\"admin\">\n\t\t\t\t\t\t<span className=\"admin-name\">{name}</span>\n\t\t\t\t\t        <span className=\"admin-position\">&nbsp;##&nbsp;{cap_type}&nbsp;</span>\n\t\t\t\t\t\t<i className=\"fas fa-kiss-wink-heart fa-lg\"></i>\n\t\t\t\t\t     </span>; break;\n\t\t\tcase \"Mod\": return <span className=\"mod\">\n\t\t\t\t\t\t<span className=\"mod-name\">{name}</span>\n\t\t\t\t\t        <span className=\"mod-position\">&nbsp;##&nbsp;{cap_type}&nbsp;</span>\n\t\t\t\t\t\t<i className=\"far fa-kiss fa-lg\"></i>\n\t\t\t\t\t     </span>; break;\n\t\t}\n\t}\n\t// also does name\n\tparseEmailNameField(email:string, name:string, capcode:string):JSX.Element{\n\t\tif(capcode){\n\t\t\treturn this.createCapCode(name, capcode)\n\t\t}\n\t\telse if(email == \"\" || !email)\n\t\t\treturn (<span className=\"name\">{this.props.name}</span>);\n\t\telse {\n\t\t\tvar parsed_email = email.split('%20');\n\t\t\tvar classes = \"\";\n\t\t\tfor (let item of parsed_email){\n\t\t\t\tclasses += item + \" \";\n\t\t\t}\n\t\t\treturn (<a className={classes} title={classes} href={classes} onClick={(e:React.MouseEvent<HTMLAnchorElement>)=> {e.preventDefault();}}>\n\t\t\t\t   <span className=\"name\">{name}</span>\n\t\t\t\t</a>);\n\t\t}\n\t}\n\treadableTime(time:number){\n\t\tvar ms_time = new Date(time * 1000);\n\t\treturn  (ms_time.getHours()+ \"\").padStart(2,'0') + \":\" + (ms_time.getMinutes() + \"\").padStart(2,'0') + \":\" + (ms_time.getSeconds()+ \"\").padStart(2,'0');\n\t}\n\tdetailsExpander(is_file:boolean, is_embed:boolean):JSX.Element|string{\n\t\treturn  (is_file || is_embed ? <a className=\"details-expander\" style={{cursor: \"pointer\", textDecoration:\"none\"}} target=\"_blank\" onClick={(e: React.MouseEvent<HTMLAnchorElement, MouseEvent>) => {\n\t\t\t\t\t\t\t this.setState({file_details_hidden: !this.state.file_details_hidden});\n                                                         e.preventDefault();\n                                                   }\n\t\t\t\t\t}\t>{this.state.file_details_hidden ? \"\" : \"\"}</a> : \" \");\n\t}\n\treadableDate(time:number){\n\t\tvar ms_time = new Date(time * 1000);\n\t\treturn  \"\" + (ms_time.getDate() + \"\").padStart(2,'0') + \"/\" + (ms_time.getMonth() + \"\").padStart(2,'0') + \"/\" + (ms_time.getFullYear()+\"\").substr(2)\n\t}\n\n\tcreateImageSearchLink(search_engine_name:string, search_engine_pattern:string):JSX.Element{\n\t\tvar source = window.location.protocol + \"//\" + window.location.hostname + \"/\" + this.props.board + \"/src/\" + this.props.tim + this.props.ext;\n\t\tvar search_url = search_engine_pattern.replace(\"%s\", source);\n\t\treturn <a className=\"sauce\" target=\"_blank\" href={search_url}>{search_engine_name}</a>\n\t}\n\n\tcreateCitesList(cite_arr:any[]):JSX.Element[]{\n\t\tvar return_jsx:JSX.Element[] = [];\n\t\tvar i = 0;\n\t\tfor(var cite of cite_arr){\n\t\t\tif(cite['board'] ==  this.props.board){\n\t\t\t\treturn_jsx.push(<span key={i++}>&nbsp;\n\t\t\t\t\t\t  <a href={window.location.protocol + \"//\" + window.location.host + \"/\" + this.props.board + \"/res/\" + cite['host'] + \"#\" + cite['post'] }>{ \">>\"  + cite['post']}</a>\n\t\t\t\t\t\t</span>)\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn_jsx.push(<span key={i++}>&nbsp;<a href={window.location.protocol + \"//\" + window.location.host + \"/\" + cite['board'] + \"/res/\" + cite['host'] + \"#\" + cite['post'] } >{ \">>>/\" + cite['board'] + \"/\" + cite['post']}</a></span>)\n\t\t\t}\n\n\t\t}\n\t\treturn return_jsx;\n }\n\n\tgenerateProperMedia():JSX.Element{\n\t\tvar is_image = false;\n\t\tvar is_video = false;\n\t\tvar is_audio = false;\n\t\tswitch(this.props.ext){\n\t\t   case \".jpg\": is_image = true; break;\n\t\t\t case \".jpeg\": is_image = true; break;\n\t\t   case \".png\": is_image = true; break;\n\t\t   case \".gif\": is_image = true; break;\n\t\t   case \".mp4\": is_video = true; break;\n\t\t   case \".webm\": is_video = true; break;\n\t\t   case \".mp3\": is_audio = true; break;\n\t\t}\n\n\t\tif(is_image){\n\t\t\tif(!this.state.show_full_image){\n\t\t\t\tvar image_thumb_src = \"\";\n\t\t\t\tif(this.props.spoiler){\n\t\t\t\t\timage_thumb_src = \"/static/kissu-spoiler.png\";\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\timage_thumb_src = \"/\" + this.props.board + \"/thumb/\" + this.props.tim + \".png\";\n\t\t\t\t}\n\t\t\t\treturn <div className=\"image-container-thumb\">\n\t\t\t\t   <a href={\"/\" + this.props.board + \"/src/\" + this.props.tim + this.props.ext} target=\"_blank\">\n\t\t\t\t       <img onClick={this.onClickExpandImage} onLoad={this.onMediaLoad} className=\"post-image\" src={image_thumb_src} style={{width:this.props.tn_w, height:this.props.tn_h, opacity:this.state.media_opacity}} />\n\t\t\t\t   </a>\n\t\t\t\t</div>\n\t\t\t}\n\t\t\telse{\n\t\t\t        return <div className=\"image-container\">\n\t\t\t\t  <a href={\"/\" + this.props.board + \"/src/\" + this.props.tim + this.props.ext} target=\"_blank\">\n\t\t\t\t       <img onClick={this.onClickExpandImage} onLoad={this.onMediaLoad} className=\"full-image\" src={\"/\" + this.props.board + \"/src/\" + this.props.tim + this.props.ext} style={{opacity:this.state.media_opacity}} />\n\t\t\t\t   </a>\n\t\t\t\t</div>\n\t\t\t}\n\t\t}\n\t\telse if(is_video){\n\t\t\tif(!this.state.show_full_video){\n\t\t\t\treturn <div className=\"video-container-thumb\">\n\t\t\t\t   <a href={\"/player.php?v=/\" + this.props.board + \"/src/\" + this.props.tim + this.props.ext + \"&t=\" + this.props.filename + this.props.ext + \"&loop=0\"} target=\"_blank\">\n\t\t\t\t       <img onClick={this.onClickExpandVideo} onLoad={this.onMediaLoad} className=\"post-image\" src={\"/\" + this.props.board + \"/thumb/\" + this.props.tim + \".jpg\"} style={{width:this.props.tn_w, height:this.props.tn_h,opacity:this.state.media_opacity}} />\n\t\t\t\t   </a>\n\t\t\t\t</div>\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn <div style={{paddingLeft: \"15px\", display: \"block\", position: \"static\"}} className=\"video-container\">\n\t\t\t\t <img onClick={this.onClickExpandVideo} onLoad={this.onMediaLoad} src=\"/static/collapse.gif\" alt=\"[ - ]\" title=\"Collapse video\" style={{marginLeft: \"-15px\", float: \"left\", display: \"inline\"}} />\n\t\t\t\t   <a href={\"/player.php?v=/\" + this.props.board + \"/src/\" + this.props.tim + this.props.ext + \"&t=\" + this.props.filename + this.props.ext + \"&loop=0\"} target=\"_blank\">\n\t\t\t\t\t<video src={\"/\" + this.props.board + \"/src/\" + this.props.tim + this.props.ext}\n\t\t\t\t\t\t\tloop={false} style={{position: \"static\", pointerEvents: \"inherit\", display: \"inline\", \"maxWidth\": \"100%\", maxHeight: \"913px\", opacity:this.state.media_opacity}}\n\t\t\t\t\t\t\tcontrols={true} autoPlay={true}>Your browser does not support HTML5 video.\n\t\t\t\t\t</video>\n\t\t\t\t   </a>\n\t\t\t\t</div>\n\t\t\t}\n\t\t}\n\t\telse if(is_audio){\n\t\t\tif(!this.state.show_full_audio){\n\t\t\t\treturn <div className=\"audio-container-thumb\">\n\t\t\t\t   <a href={\"/\" + this.props.board + \"/src/\" + this.props.tim + this.props.ext} target=\"_blank\">\n\t\t\t\t       <img onClick={this.onClickExpandAudio} onLoad={this.onMediaLoad} className=\"post-image\" src={\"/static/kissu-audio.png\"} style={{width:200, height:200,opacity:this.state.media_opacity}} />\n\t\t\t\t   </a>\n\t\t\t\t</div>\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn <div style={{paddingLeft: \"15px\", display: \"block\", position: \"static\"}} className='audio-container'>\n\t\t\t\t <img onClick={this.onClickExpandAudio}  onLoad={this.onMediaLoad} src=\"/static/collapse.gif\" alt=\"[ - ]\" title=\"Collapse Audio\" style={{marginLeft: \"-15px\", float: \"left\", display: \"inline\"}} />\n\t\t\t\t   <a href={\"/\" + this.props.board + \"/src/\" + this.props.tim + this.props.ext} target=\"_blank\">\n\t\t\t\t\t<audio src={\"/\" + this.props.board + \"/src/\" + this.props.tim + this.props.ext} loop={false} style={{position: \"static\", pointerEvents: \"inherit\", display: \"inline\", \"maxWidth\": \"100%\", maxHeight: \"913px\", opacity:this.state.media_opacity}} controls={true} autoPlay={true}>Your browser does not support HTML5 Audio</audio>\n\t\t\t\t   </a>\n\t\t\t\t</div>\n\t\t\t}\n\n\t\t}\n\t}\n\n\t// If it were possible to XSS this then it should also be possible on vichan.\n\t// Still a saftey check would be nice\n\tgenerateStagedEmbeding():JSX.Element{\n\t\tif(!this.state.show_full_embed && localStorage['fast-embed'] == \"true\"){\n\t\t    if(localStorage['embed-specific'] == \"thumb\"){\n\t\t\treturn <div className=\"embed-container-thumb\">\n\t\t\t\t<a target=\"_blank\">\n\t\t\t      <img onClick={this.onClickExpandEmbed} className=\"post-image\" src={\"/static/kissu-embed.jpg\"} style={{width:200, height:200,cursor:\"pointer\"}} alt={\"Embed Thumb failed to load\"} />\n\t\t\t   </a>\n\t\t\t</div>\n\t\t   }\n\t\t   else{\n\t\t      return <div className=\"embed-container-thumb\">\n\t\t\t\t<img onClick={this.onClickExpandEmbed}\n\t\t\t\t\tsrc={this.getEmbedThumb(this.getSRCFromIframe(this.props.embed))}\n\t\t\t\t\tclassName=\"post-image\" style={{width:270, height:202,cursor:\"pointer\"}}\n\t\t\t\t\talt={\"\"} />\n\t\t\t     </div>\n                   }\n\t\t}\n\t\telse{\n\t\t\tvar dangerous_html = {__html: this.props.embed};\n\t\t\treturn <div className=\"embed-container\" >\n\t\t\t\t <img onClick={this.onClickExpandEmbed} src=\"/static/collapse.gif\" alt=\"[ - ]\" title=\"Collapse Media\" style={{marginLeft: \"-15px\", float: \"left\", display: \"inline\"}} />\n\t\t\t\t <div dangerouslySetInnerHTML={dangerous_html}></div>\n\t\t\t\t</div>\n\t\t}\n\n\t}\n\n\t// from pure url return image link\n\tgetEmbedThumb(url:string){\n\t\tlet code_match:RegExpMatchArray;\n\t\tif((code_match = /(youtu\\.be\\/|youtube.com\\/)([a-z0-9\\-]{11})/gi.exec(url))){\n\t\t\treturn \"https://img.youtube.com/vi/\" + code_match[2] + \"/mqdefault.jpg\";\n\t\t}\n\t\telse if((code_match = /(nicovideo\\.jp\\/watch\\/sm)([0-9]{8})/gi.exec(url))){\n\t\t\treturn \"https://nicovideo.cdn.nimg.jp/thumbnails/\" + code_match[2] + \"/\" + code_match[2] + \".L\";\n\n\t\t}\n\t\telse{\n\t\t\treturn \"https://static.libsyn.com/p/assets/6/c/a/3/6ca38c2fefa1e989/WTF_-_new_larger_cover.jpg\"\n\t\t}\n\t}\n\n\tgetSRCFromIframe(embed_string:string){\n\t\tvar embed_match = embed_string.match(/src=\\\".*?\\\"/gi);\n\t\tif(embed_match.length == 1){\n\t\t\tlet processed_match = embed_match[0]\n\t\t\t\t.replace(\"src=\\\"\", \"\")\n\t\t\t\t.replace(\"\\\"\", \"\")\n\t\t\t\t.replace(\"embed/\", \"\")\n\t\t\t\t.replace(\"embed.\", \"\");\n\t\t\treturn processed_match;\n\t\t}\n\t\telse\n\t\t\treturn \"URL not found\";\n\t}\n\n\n\ttriggerThreadRebuild(){\n\t\tthis.props.threadReconstruct();\n\t}\n\n\trender(){\n// FIX: state expantion is hard to follow and depends on multiple conditions.\n// NOTE: data-op is a temporary messure to maintain compatibility with legacy JS\n\t\tvar detail_display_prop:React.CSSProperties = {display: (this.state.file_details_hidden ? \"none\" : \"block\")};\n\t\treturn (<div data-op={this.props.op_id} id={this.props.hierarchy_class + \"_\" + this.props.id} className={\"post \" + this.props.hierarchy_class + \" \" + (this.props.highlighted || window.location.hash == \"#\" + this.props.id ? \"highlighted\" : \"\")}>\n\n\t\t\t{this.props.filename && localStorage['no-img'] == \"false\" && this.generateProperMedia()}\n\t\t\t{this.props.embed && localStorage['no-img'] == \"false\" && this.generateStagedEmbeding()}\n\n\t\t\t<div className=\"post-contents\">\n\t\t\t   <div className=\"intro\">\n\t\t\t\t<div className=\"user\">\n\t\t\t\t  <label htmlFor={\"delete_\" + this.props.id}>&nbsp;\n\t\t\t\t    <input type=\"checkbox\" className=\"delete\" name={\"delete_\" + this.props.id} id={\"delete_\" + this.props.id} />\n\t\t\t\t    {this.props.sub &&\n\t\t\t\t\t<span className=\"subject\">&nbsp;{this.props.sub}</span>\n\t\t\t\t    }\n\t\t\t\t    {this.parseEmailNameField(this.props.email,this.props.name, this.props.capcode)}&nbsp;\n\t\t\t\t    <time data-utc={this.props.time}>{ this.readableDate(this.props.time) } { this.detailsExpander(!!this.props.filename, !!this.props.embed) } { this.readableTime(this.props.time) }</time>\n\t\t\t\t  </label>&nbsp;\n\t\t\t  \t  <a className=\"post_no\" id={\"post_no_\" + this.props.id} onClick={(event: React.MouseEvent<HTMLAnchorElement, MouseEvent>) => {\n\t\t\t\t\t\t\tthis.highlightReply(event,this.props.id);\n\t\t\t\t\t\t}\n\t\t\t\t   } href={ \"/\" + this.props.board + \"/res/\" + this.props.op_id + \"#\" + this.props.id}>No.</a>\n\t\t\t          <a className=\"post_no\" style={{cursor: \"pointer\"}} onClick={(event: React.MouseEvent<HTMLAnchorElement, MouseEvent>) => {\n\t\t\t\t\t\tthis.citeReply(this.props.id);\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t    }\n\t\t\t\t\t}\n\t\t\t\t  >{this.props.id}</a>&nbsp;\n\t\t\t\t{this.props.sticky == 1   && <i className=\"fas fa-thumbtack fa-lg\" title=\"Sticky\">&nbsp;</i>}\n\t\t\t\t{this.props.locked == 1   && <i className=\"fas fa-lock fa-lg\" title=\"Locked\">&nbsp;</i>}\n\t\t\t\t{this.props.cyclical == 1 && <i className=\"fas fa-sync-alt fa-lg\" title=\"Cycle\">&nbsp;</i>}\n\t\t\t\t{this.props.sage == 1     && <i className=\"fas fa-anchor fa-lg\" title=\"Sink\">&nbsp;</i>}\n\t\t\t\t{this.props.hierarchy_class == \"op\" && this.props.paged && <span className=\"reply-anchor\">&emsp;<a href={ \"/\" + this.props.board + \"/res/\" + this.props.id }>[Open]</a></span>}\n\t\t\t\t{this.props.cites && this.createCitesList(this.props.cites)}\n\n\t\t\t      </div>\n\t\t\t        <div className=\"optional-file-info\" style={detail_display_prop}>\n\t\t\t\t {this.props.filename && localStorage['rev-img'] == \"true\" &&\n\t\t\t\t   <div className=\"image-search\">&ensp;&nbsp;\n\t\t\t\t\t{this.createImageSearchLink(\"Google\", \"https://www.google.com/searchbyimage?image_url=%s&safe=off\")} &nbsp;\n\t\t\t\t\t{this.createImageSearchLink(\"Yandex\", \"https://yandex.com/images/search?rpt=imageview&url=%s\")} &nbsp;\n\t\t\t\t\t{this.createImageSearchLink(\"iqdb\", \"https://iqdb.org/?url=%s\")} &nbsp;\n\t\t\t\t\t{this.createImageSearchLink(\"Trace\", \"trace.moe/?auto&url=%s\")} &nbsp;\n\t\t\t\t   </div>\n\t\t\t  \t }\n\n\t\t\t\t {this.props.filename &&\n\t\t\t\t   <div className=\"file\" >\n\t\t\t\t\t<span className=\"fileinfo\">\n\t\t\t\t\t <a href={\"/\" + this.props.board + \"/src/\" + this.props.tim + this.props.ext}>\n\t\t\t\t\t\t<span className=\"postfilename\" title={this.props.filename + this.props.ext}>{this.shortenFileName(this.props.filename) + this.props.ext}</span>\n\t\t\t\t\t\t</a>&nbsp;\n\t\t\t\t\t\t<span className=\"unimportant\">({ this.formatFileSize(this.props.fsize) }{\",\" + this.props.h}{\"x\"+this.props.w})</span>&nbsp;\n\t\t\t\t\t</span>\n\t\t\t\t   </div>\n\t\t\t\t }\n\t\t\t\t {this.props.embed &&\n\t\t\t\t   <div className=\"embed-src\" >\n\t\t\t\t\t<span className=\"embedinfo\">\n\t\t\t\t\t  <a href={this.getSRCFromIframe(this.props.embed)} target=\"_blank\">\n\t\t\t\t\t\t{this.getSRCFromIframe(this.props.embed)}\n\t\t\t\t\t  </a>&nbsp;\n\t\t\t\t\t</span>\n\t\t\t\t   </div>\n\t\t\t\t }\n\n\t\t\t    </div>\n\t\t\t   </div>\n\t\t\t\t<div className=\"body\">\n\t\t\t\t   {this.props.com && this.parsePostBodyIntoSafeJSX(this.props.com)}\n\t\t\t\t</div>\n\t\t\t   </div>\n\t\t\t   {(this.props.hierarchy_class == \"op\" && (this.props.omitted_posts > 0 || (this.props.expanded && this.props.paged))) &&\n\t\t\t\t<div className=\"omitted\">\n\t\t\t\t\t{this.props.omitted_posts > 0 && this.props.omitted_posts + \" Replies Hidden \"}\n\t\t\t\t\t<a style={{cursor: \"pointer\"}} onClick={\n\t\t\t\t\t\t(e:React.MouseEvent<HTMLAnchorElement>)=> {\n\t\t\t\t\t\t\tthis.triggerThreadRebuild();\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t}>{this.props.omitted_posts > 0 ? \"[Expand]\" : \"[Condense]\"}</a>\n\n\t\t\t\t</div>\n\t\t          }\n\t\t    </div>)\n\t}\n}\n","import * as React from \"react\";\n\nexport type ThreadUpdaterProperties = {\n    board:string,\n    thread_id: any, // typescript bizzarely not letter me set this as number\n\n    threadListUpdateSignal: (count_update:boolean)=>void\n}\n\ntype ThreadUpdaterVariables = {\n\ttimer_seconds:number\n}\n\nexport class ThreadUpdater extends React.Component<ThreadUpdaterProperties, ThreadUpdaterVariables>{\n\t\n\ttimer:number; \n\ttimer_increment:number = 5;\n\ttimer_repetitions:number = 1;\n\n\tconstructor(props:any){\n\t\tsuper(props);\n\t\t\n\t\tthis.fireUpUpdater = this.fireUpUpdater.bind(this);\n\t\t//this.countDown = this.countDown.bind(this);\n\n\t\tthis.state = {timer_seconds: 5}\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.timer = window.setInterval(() => this.countDown(), 1000);\n\t}\n\t\n\tcomponentWillUnmount(){\n\t\tclearInterval(this.timer);\n\t}\n\n\tcountDown(){\n\t\tif(this.state.timer_seconds == 0){\nconsole.log(this.timer_increment * this.timer_repetitions);\n\t\t\tthis.timer_repetitions += 1;\n\t\t\tthis.setState({timer_seconds : this.timer_increment * this.timer_repetitions});\n\t\t\tthis.fireUpUpdater();\n\t\t}\n\t\telse{\n\t\t\tthis.setState({timer_seconds: this.state.timer_seconds - 1});\n\t\t}\n\t}\n\n\tfireUpUpdater(){\n\t\tthis.props.threadListUpdateSignal(true);\n\t}\n\n\trender(){\n\t\treturn (<div id=\"updater\"><a onClick={()=>{\t\t\t\n\t\t\t\t\tthis.setState({timer_seconds: this.timer_increment });\n\t\t\t\t\tthis.fireUpUpdater();\n\t\t\t\t\tthis.timer_repetitions = 1;\n\t\t\t\t}\n\t\t\t} style={{cursor:\"pointer\"}}>[Update]</a>&emsp;<span id=\"timer\">[ {this.state.timer_seconds} ]</span></div>);\n\t}\n}\n\n","import * as React from \"react\";\nimport {Thread, ThreadProperties} from \"./Thread\";\n\nexport type PageProperties = {\n    board:string,\n    page:number,\n\n    finishedCallBackFunction: ()=>void\n}\ntype PageVariables = {\n    spaced_threads:JSX.Element[],\n    error:string\n}\n\n// TODO: Use threads.json to retrieve a list of all threads and have individual threads carry their own json data\nexport class Page extends React.Component<PageProperties, PageVariables>{\n\n\tcount_of_all_threads_on_page:number = 0;\n\tcount_of_all_threads_mounted:number = 0;\n\n\tconstructor(props:any){\n\t  super(props);\n\t  this.setPageThreads = this.setPageThreads.bind(this);\n\t  this.getPagedJSONData = this.getPagedJSONData.bind(this);\n\t  this.returnThreadJSXObject = this.returnThreadJSXObject.bind(this);\n\t  this.defineStateThreadsArray = this.defineStateThreadsArray.bind(this);\n\t  this.maintainCountOfAllThreads = this.maintainCountOfAllThreads.bind(this);\n\t  this.state = {spaced_threads:[], error:null};\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.setPageThreads();\n\t}\n\n\tmaintainCountOfAllThreads(){\n\t\tthis.count_of_all_threads_mounted++;\n\t\tif(this.count_of_all_threads_mounted == this.count_of_all_threads_on_page){\n\t\t\tthis.props.finishedCallBackFunction();\n\t\t}\n\t\t\n\t}\n\n\tsetPageThreads(){\n\t\tvar json_arr = this.getPagedJSONData(this.props.board, this.props.page)\n\t\t    .then((recieved:string) => {\n\t\t\tvar paged_json = JSON.parse(recieved)[\"threads\"];\n\t\t\tif(paged_json.length >= this.props.page-1){\n\t\t\t\tvar threads_arr:JSX.Element[] = [];\n\t\t\t\tpaged_json.forEach((thread_obj:any, index:number)=>{\n\t\t\t\t\tthreads_arr.push(this.returnThreadJSXObject(thread_obj[\"posts\"], index));\t\t\n\t\t\t\t});\n\n\t\t\t\tthis.count_of_all_threads_on_page = threads_arr.length;\n\t\t\t\tthis.count_of_all_threads_mounted = 0;\n\n\t\t\t\t//unset if set\n\t\t\t\tthis.setState({spaced_threads: []});\n\n\t\t\t\tthis.defineStateThreadsArray(threads_arr);\n\t\t\t}\n\t\t\telse{\n\t\t\t   this.setState({error: \"Page out of bounds\"});\n\t\t\t}\n\t\t   })\n \t\t   .catch((err:any)=>{\n\t\t\tconsole.log(err);\n\t\t       this.setState({error: err + \"\\nJSON fetch error\"});\n\t\t });\n\t}\n\n\tthreadQuickReply(thread_id:number, reply_id:number){\n}\t\n\n\treturnThreadJSXObject(thread_obj:any, key:number):JSX.Element{\n\t\tvar thread_details:ThreadProperties = {\n\t\t\tboard: this.props.board as string,\n\t\t\tthread_id: thread_obj[0][\"no\"] as number,\n\t\t\tpaged: thread_obj,\n\n\t\t\tthreadQuickReply: this.threadQuickReply,\n\t\t\tfinishedCallBackFunction: this.maintainCountOfAllThreads\n\t\t};\n\t\treturn <Thread {...thread_details} key={key * 3}/>;\n\t}\n\n\tdefineStateThreadsArray(threads:JSX.Element[]){\n\t\tfor(var thread_ind = 0 ; thread_ind < threads.length ; thread_ind++){\n\t\t  this.setState({spaced_threads: [...this.state.spaced_threads, threads[thread_ind]]});\n\t\t  this.setState({spaced_threads: [...this.state.spaced_threads, <br className=\"clear\" key={thread_ind * 3 - 1} />]});\n\t\t  this.setState({spaced_threads: [...this.state.spaced_threads, <hr key={thread_ind * 3 - 2} />]});\n\t\t}\n\t}\n\n\n\tgetPagedJSONData(board:string, page:number){\n\t\treturn new Promise((resolve, reject) => {\t\n\t\t\tvar threads_req = new XMLHttpRequest();\n\t\t\tthreads_req.addEventListener(\"load\", function(re:ProgressEvent<XMLHttpRequestEventTarget>){\n\t\t\t\tif(this.status >= 400){\n\t\t\t\t\treject(this.status);\n\t\t\t\t}\n\t\t\t\telse if (this.status >= 300){\n\t\t\t\t\treject(this.status);\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tresolve(this.response);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthreads_req.addEventListener(\"error\", function(err:ProgressEvent<XMLHttpRequestEventTarget>){\n\t\t\t\treject(this.status);\n\t\t\t})\n\t\t\tthreads_req.open(\"GET\", `/${board}/${page-1}.json`);\t\n\t\t\tthreads_req.send();\n\t\t});\n\n\t}\n\n\trender(){\n\t   if(this.state.error)\n\t\treturn (<p>{this.state.error}</p>)\t \n\t   return (<div id={\"page-\" + this.props.page + \"-container\"} className=\"page-container\">\n\t\t     {this.state.spaced_threads}\n\t\t</div>);\n\t}\n}\n","import * as React from \"react\";\n\nexport type DeleteButtonProperties = {};\n\ntype DeleteButtonVariables = {\n};\n\nexport class DeleteButton extends React.Component<DeleteButtonProperties, DeleteButtonVariables>{\n\n\tconstructor(props:any){\n\t\tsuper(props);\n\t}\n\n\n\trender(){\n\t\treturn <div className=\"delete-container\">\n\t\t\t\t<strong>Delete Selected Posts</strong><br/>\n\t\t\t\t<label>Password: <input name=\"pswrd\" type=\"password\" value={localStorage['pswrd']}/></label><br/>\n\t\t\t\t<label>Delete Media Only: <input type=\"checkbox\" name=\"file\"/></label><br/>\n\t\t\t\t<input type=\"submit\" name=\"delete\" value=\"delete\" / >\n\t\t\t</div>\n\t}\n}\n\n","import * as React from \"react\";\n\nexport type ReportButtonProperties = {};\n\ntype ReportButtonVariables = {\n};\n\nexport class ReportButton extends React.Component<ReportButtonProperties, ReportButtonVariables>{\n\n\tconstructor(props:any){\n\t\tsuper(props);\n\t}\n\n\n\trender(){\n\t\treturn <div className=\"report-container\">\n\t\t\t\t<strong>Report Selected Posts</strong><br/>\n\t\t\t\t<label>Reason: <input name=\"reason\" type=\"text\"/></label><br/>\n\t\t\t\t<input type=\"submit\" name=\"report\" value=\"Report\" / >\n\t\t\t</div>\n\t}\n}\n\n","// Use dragable to create a post option selector\n// place things in localstorage\n// also hooks and refs to relevant things\n\nimport * as React from \"react\";\nimport Draggable, {DraggableCore} from 'react-draggable';\n\nexport type OptionMenuProperties = {optionSetCallBack:()=>void}\n\ntype OptionMenuVariables = {\n\tshow_menu:boolean,\n\tgrab_pointer:string,\n\n\ttoggle_options:boolean\n}\n\nexport class OptionMenu extends React.Component<OptionMenuProperties, OptionMenuVariables>{\n\t\n\tconstructor(props:any){\n\t\tsuper(props);\n\t\tthis.state=({show_menu: false, grab_pointer:\"grab\", toggle_options:false});\n\t\t\n\t\tthis.toggleShowMenu = this.toggleShowMenu.bind(this);\t\n\t\tthis.setOptionLocalStore = this.setOptionLocalStore.bind(this);\t\t\n\n\t\tif(localStorage['fast-embed'] == undefined) localStorage['fast-embed'] = \"true\";\n\t\tif(localStorage['embed-specific'] == undefined) localStorage['embed-specific'] = \"source\";\n\t\tif(localStorage['file-info'] == undefined) localStorage['file-info'] = \"false\";\n\t\tif(localStorage['rev-img'] == undefined) localStorage['rev-img'] = \"true\";\n\t\tif(localStorage['no-img'] == undefined) localStorage['no-img'] = \"false\";\n\t\tif(localStorage['auto-up'] == undefined) localStorage['auto-up'] = \"true\";\n\n \t}\n\n\ttoggleShowMenu(){\n\t\tthis.setState({show_menu: !this.state.show_menu});\n\t}\n\n\n\tsetOptionLocalStore(e:React.MouseEvent<HTMLInputElement, MouseEvent>){\n\t\tswitch((e.target as HTMLInputElement).name){\n\t\t\tcase \"fast-embed\": localStorage.setItem(\"fast-embed\", \"\" + (e.target as HTMLInputElement).checked); break;\n\t\t\tcase \"embed-specific\": localStorage.setItem(\"embed-specific\", (e.target as HTMLInputElement).value);break;\n\n\t\t\tcase \"file-info\": localStorage.setItem(\"file-info\", \"\" + (e.target as HTMLInputElement).checked); break;\n\t\t\tcase \"rev-img\": localStorage.setItem(\"rev-img\", \"\" + (e.target as HTMLInputElement).checked);break;\n\t\t\tcase \"no-img\": localStorage.setItem(\"no-img\", \"\" + (e.target as HTMLInputElement).checked); break;\n\n\t\t\tcase \"auto-up\": localStorage.setItem(\"auto-up\", \"\" + (e.target as HTMLInputElement).checked); break;\n\t\t}\n\n\t\tthis.setState({toggle_options: !this.state.toggle_options});\n\t\tthis.props.optionSetCallBack();\n\t}\n\n\trender(){\n\t\treturn <span className=\"options-container\">\n\t\t\t<a onClick={this.toggleShowMenu} style={{cursor:\"pointer\"}}>[ Options ]</a>\n\t\t\t{ this.state.show_menu &&\n\t\t\t\t<Draggable \n\t\t\t\t\thandle=\".handle\">\n\t\t\t\t\t<div id=\"options-menu\">\n\t\t\t\t\t\t<div className=\"handle\" onMouseDown={(e)=>this.setState({grab_pointer: \"grabbing\"})} \n\t\t\t\t\t\t\t\tonMouseUp={(e)=>this.setState({grab_pointer: \"grab\"})}\n\t\t\t\t\t\t\t\tstyle={{cursor: this.state.grab_pointer}}>\n\t\t\t\t\t\t\t<strong unselectable=\"on\"  >Page Options</strong>\n\t\t\t\t\t\t\t<a className=\"close-options\" onClick={this.toggleShowMenu}>X</a><hr/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div id=\"option-input-container\">\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t   <strong>Embedding</strong> <br/>\n\t\t\t\t\t\t   &emsp;<label><input type=\"checkbox\"  name=\"fast-embed\" onClick={this.setOptionLocalStore} defaultChecked={localStorage['fast-embed'] == \"true\"}  />Fast Video Embedding</label><br/>\n\t\t\t\t\t\t   &emsp;&emsp;<label><input type=\"radio\" name=\"embed-specific\" value=\"source\" onClick={this.setOptionLocalStore} defaultChecked={localStorage['embed-specific'] == \"source\"} disabled={localStorage['fast-embed'] == \"false\"}/>Source Thumbnails</label><br/>\n\t\t\t\t\t\t   &emsp;&emsp;<label><input type=\"radio\" name=\"embed-specific\" value=\"thumb\" onClick={this.setOptionLocalStore} defaultChecked={localStorage['embed-specific'] == \"thumb\"} disabled={localStorage['fast-embed'] == \"false\"}/>Kissu Thumbnails</label><br/>\n\t\t\t\t\t\t   <hr/>\n\n\t\t\t\t\t\t   <strong>File Options</strong> <br/>\n\t\t\t\t\t\t   &emsp;<label><input name=\"file-info\" type=\"checkbox\" onClick={this.setOptionLocalStore} defaultChecked={localStorage['file-info'] == \"true\"} />Show file info by default</label><br/>\n\t\t\t\t\t\t   &emsp;<label><input name=\"rev-img\" type=\"checkbox\" onClick={this.setOptionLocalStore} defaultChecked={localStorage['rev-img'] == \"true\"} />Show reverse image search</label><br/>\n\t\t\t\t\t\t   &emsp;<label><input name=\"no-img\" type=\"checkbox\" onClick={this.setOptionLocalStore} defaultChecked={localStorage['no-img'] == \"true\"} />Remove images from page load</label><br/>\n\t\t\t\t\t\t   <hr/>\n\n\t\t\t\t\t\t   <strong>Auto Updater Options</strong> <br/>\t\t\n\t\t\t\t\t\t   &emsp;<label><input name=\"auto-up\" type=\"checkbox\" onClick={this.setOptionLocalStore} defaultChecked={localStorage['auto-up'] == \"true\"}/>Enable thread auto-updates</label><br/>\n\t\t\t\t\t\t   <hr/>\n\t\t\t\t\t\t   <hr/>\n\t\t\t\t\t </div>\n\t\t\t\t\t</div>\n\t\t\t\t</Draggable>\n\t\t\t}\n\t\t      </span>\n\t}\n\n}\n","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"react-dom\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\", \"react-dom\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ReactDraggable\"] = factory(require(\"react\"), require(\"react-dom\"));\n\telse\n\t\troot[\"ReactDraggable\"] = factory(root[\"React\"], root[\"ReactDOM\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__1__, __WEBPACK_EXTERNAL_MODULE__2__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg) && arg.length) {\n\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\tif (inner) {\n\t\t\t\t\tclasses.push(inner);\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","const {default: Draggable, DraggableCore} = require('./Draggable');\n\n// Previous versions of this lib exported <Draggable> as the root export. As to no-// them, or TypeScript, we export *both* as the root and as 'default'.\n// See https://github.com/mzabriskie/react-draggable/pull/254\n// and https://github.com/mzabriskie/react-draggable/issues/266\nmodule.exports = Draggable;\nmodule.exports.default = Draggable;\nmodule.exports.DraggableCore = DraggableCore;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","// @flow\n// @credits https://gist.github.com/rogozhnikoff/a43cfed27c41e4e68cdc\nexport function findInArray(array: Array<any> | TouchList, callback: Function): any {\n  for (let i = 0, length = array.length; i < length; i++) {\n    if (callback.apply(callback, [array[i], i, array])) return array[i];\n  }\n}\n\nexport function isFunction(func: any): boolean {\n  return typeof func === 'function' || Object.prototype.toString.call(func) === '[object Function]';\n}\n\nexport function isNum(num: any): boolean {\n  return typeof num === 'number' && !isNaN(num);\n}\n\nexport function int(a: string): number {\n  return parseInt(a, 10);\n}\n\nexport function dontSetMe(props: Object, propName: string, componentName: string) {\n  if (props[propName]) {\n    return new Error(`Invalid prop ${propName} passed to ${componentName} - do not set this, set it on the child.`);\n  }\n}\n","// @flow\nconst prefixes = ['Moz', 'Webkit', 'O', 'ms'];\nexport function getPrefix(prop: string='transform'): string {\n  // Checking specifically for 'window.document' is for pseudo-browser server-side\n  // environments that define 'window' as the global context.\n  // E.g. React-rails (see https://github.com/reactjs/react-rails/pull/84)\n  if (typeof window === 'undefined' || typeof window.document === 'undefined') return '';\n\n  const style = window.document.documentElement.style;\n\n  if (prop in style) return '';\n\n  for (let i = 0; i < prefixes.length; i++) {\n    if (browserPrefixToKey(prop, prefixes[i]) in style) return prefixes[i];\n  }\n\n  return '';\n}\n\nexport function browserPrefixToKey(prop: string, prefix: string): string {\n  return prefix ? `${prefix}${kebabToTitleCase(prop)}` : prop;\n}\n\nexport function browserPrefixToStyle(prop: string, prefix: string): string {\n  return prefix ? `-${prefix.toLowerCase()}-${prop}` : prop;\n}\n\nfunction kebabToTitleCase(str: string): string {\n  let out = '';\n  let shouldCapitalize = true;\n  for (let i = 0; i < str.length; i++) {\n    if (shouldCapitalize) {\n      out += str[i].toUpperCase();\n      shouldCapitalize = false;\n    } else if (str[i] === '-') {\n      shouldCapitalize = true;\n    } else {\n      out += str[i];\n    }\n  }\n  return out;\n}\n\n// Default export is the prefix itself, like 'Moz', 'Webkit', etc\n// Note that you may have to re-test for certain things; for instance, Chrome 50\n// can handle unprefixed `transform`, but not unprefixed `user-select`\nexport default getPrefix();\n","// @flow\nimport {findInArray, isFunction, int} from './shims';\nimport browserPrefix, {browserPrefixToKey} from './getPrefix';\n\nimport type {ControlPosition, PositionOffsetControlPosition, MouseTouchEvent} from './types';\n\nlet matchesSelectorFunc = '';\nexport function matchesSelector(el: Node, selector: string): boolean {\n  if (!matchesSelectorFunc) {\n    matchesSelectorFunc = findInArray([\n      'matches',\n      'webkitMatchesSelector',\n      'mozMatchesSelector',\n      'msMatchesSelector',\n      'oMatchesSelector'\n    ], function(method){\n      // $FlowIgnore: Doesn't think elements are indexable\n      return isFunction(el[method]);\n    });\n  }\n\n  // Might not be found entirely (not an Element?) - in that case, bail\n  // $FlowIgnore: Doesn't think elements are indexable\n  if (!isFunction(el[matchesSelectorFunc])) return false;\n\n  // $FlowIgnore: Doesn't think elements are indexable\n  return el[matchesSelectorFunc](selector);\n}\n\n// Works up the tree to the draggable itself attempting to match selector.\nexport function matchesSelectorAndParentsTo(el: Node, selector: string, baseNode: Node): boolean {\n  let node = el;\n  do {\n    if (matchesSelector(node, selector)) return true;\n    if (node === baseNode) return false;\n    node = node.parentNode;\n  } while (node);\n\n  return false;\n}\n\nexport function addEvent(el: ?Node, event: string, handler: Function): void {\n  if (!el) { return; }\n  if (el.attachEvent) {\n    el.attachEvent('on' + event, handler);\n  } else if (el.addEventListener) {\n    el.addEventListener(event, handler, true);\n  } else {\n    // $FlowIgnore: Doesn't think elements are indexable\n    el['on' + event] = handler;\n  }\n}\n\nexport function removeEvent(el: ?Node, event: string, handler: Function): void {\n  if (!el) { return; }\n  if (el.detachEvent) {\n    el.detachEvent('on' + event, handler);\n  } else if (el.removeEventListener) {\n    el.removeEventListener(event, handler, true);\n  } else {\n    // $FlowIgnore: Doesn't think elements are indexable\n    el['on' + event] = null;\n  }\n}\n\nexport function outerHeight(node: HTMLElement): number {\n  // This is deliberately excluding margin for our calculations, since we are using\n  // offsetTop which is including margin. See getBoundPosition\n  let height = node.clientHeight;\n  const computedStyle = node.ownerDocument.defaultView.getComputedStyle(node);\n  height += int(computedStyle.borderTopWidth);\n  height += int(computedStyle.borderBottomWidth);\n  return height;\n}\n\nexport function outerWidth(node: HTMLElement): number {\n  // This is deliberately excluding margin for our calculations, since we are using\n  // offsetLeft which is including margin. See getBoundPosition\n  let width = node.clientWidth;\n  const computedStyle = node.ownerDocument.defaultView.getComputedStyle(node);\n  width += int(computedStyle.borderLeftWidth);\n  width += int(computedStyle.borderRightWidth);\n  return width;\n}\nexport function innerHeight(node: HTMLElement): number {\n  let height = node.clientHeight;\n  const computedStyle = node.ownerDocument.defaultView.getComputedStyle(node);\n  height -= int(computedStyle.paddingTop);\n  height -= int(computedStyle.paddingBottom);\n  return height;\n}\n\nexport function innerWidth(node: HTMLElement): number {\n  let width = node.clientWidth;\n  const computedStyle = node.ownerDocument.defaultView.getComputedStyle(node);\n  width -= int(computedStyle.paddingLeft);\n  width -= int(computedStyle.paddingRight);\n  return width;\n}\n\n// Get from offsetParent\nexport function offsetXYFromParent(evt: {clientX: number, clientY: number}, offsetParent: HTMLElement, scale: number): ControlPosition {\n  const isBody = offsetParent === offsetParent.ownerDocument.body;\n  const offsetParentRect = isBody ? {left: 0, top: 0} : offsetParent.getBoundingClientRect();\n\n  const x = (evt.clientX + offsetParent.scrollLeft - offsetParentRect.left) / scale;\n  const y = (evt.clientY + offsetParent.scrollTop - offsetParentRect.top) / scale;\n\n  return {x, y};\n}\n\nexport function createCSSTransform(controlPos: ControlPosition, positionOffset: PositionOffsetControlPosition): Object {\n  const translation = getTranslation(controlPos, positionOffset, 'px');\n  return {[browserPrefixToKey('transform', browserPrefix)]: translation };\n}\n\nexport function createSVGTransform(controlPos: ControlPosition, positionOffset: PositionOffsetControlPosition): string {\n  const translation = getTranslation(controlPos, positionOffset, '');\n  return translation;\n}\nexport function getTranslation({x, y}: ControlPosition, positionOffset: PositionOffsetControlPosition, unitSuffix: string): string {\n  let translation = `translate(${x}${unitSuffix},${y}${unitSuffix})`;\n  if (positionOffset) {\n    const defaultX = `${(typeof positionOffset.x === 'string') ? positionOffset.x : positionOffset.x + unitSuffix}`;\n    const defaultY = `${(typeof positionOffset.y === 'string') ? positionOffset.y : positionOffset.y + unitSuffix}`;\n    translation = `translate(${defaultX}, ${defaultY})` + translation;\n  }\n  return translation;\n}\n\nexport function getTouch(e: MouseTouchEvent, identifier: number): ?{clientX: number, clientY: number} {\n  return (e.targetTouches && findInArray(e.targetTouches, t => identifier === t.identifier)) ||\n         (e.changedTouches && findInArray(e.changedTouches, t => identifier === t.identifier));\n}\n\nexport function getTouchIdentifier(e: MouseTouchEvent): ?number {\n  if (e.targetTouches && e.targetTouches[0]) return e.targetTouches[0].identifier;\n  if (e.changedTouches && e.changedTouches[0]) return e.changedTouches[0].identifier;\n}\n\n// User-select Hacks:\n//\n// Useful for preventing blue highlights all over everything when dragging.\n\n// Note we're passing `document` b/c we could be iframed\nexport function addUserSelectStyles(doc: ?Document) {\n  if (!doc) return;\n  let styleEl = doc.getElementById('react-draggable-style-el');\n  if (!styleEl) {\n    styleEl = doc.createElement('style');\n    styleEl.type = 'text/css';\n    styleEl.id = 'react-draggable-style-el';\n    styleEl.innerHTML = '.react-draggable-transparent-selection *::-moz-selection {all: inherit;}\\n';\n    styleEl.innerHTML += '.react-draggable-transparent-selection *::selection {all: inherit;}\\n';\n    doc.getElementsByTagName('head')[0].appendChild(styleEl);\n  }\n  if (doc.body) addClassName(doc.body, 'react-draggable-transparent-selection');\n}\n\nexport function removeUserSelectStyles(doc: ?Document) {\n  try {\n    if (doc && doc.body) removeClassName(doc.body, 'react-draggable-transparent-selection');\n    // $FlowIgnore: IE\n    if (doc.selection) {\n      // $FlowIgnore: IE\n      doc.selection.empty();\n    } else {\n      window.getSelection().removeAllRanges();  // remove selection caused by scroll\n    }\n  } catch (e) {\n    // probably IE\n  }\n}\n\nexport function styleHacks(childStyle: Object = {}): Object {\n  // Workaround IE pointer events; see #51\n  // https://github.com/mzabriskie/react-draggable/issues/51#issuecomment-103488278\n  return {\n    touchAction: 'none',\n    ...childStyle\n  };\n}\n\nexport function addClassName(el: HTMLElement, className: string) {\n  if (el.classList) {\n    el.classList.add(className);\n  } else {\n    if (!el.className.match(new RegExp(`(?:^|\\\\s)${className}(?!\\\\S)`))) {\n      el.className += ` ${className}`;\n    }\n  }\n}\n\nexport function removeClassName(el: HTMLElement, className: string) {\n  if (el.classList) {\n    el.classList.remove(className);\n  } else {\n    el.className = el.className.replace(new RegExp(`(?:^|\\\\s)${className}(?!\\\\S)`, 'g'), '');\n  }\n}\n","// @flow\nimport {isNum, int} from './shims';\nimport ReactDOM from 'react-dom';\nimport {getTouch, innerWidth, innerHeight, offsetXYFromParent, outerWidth, outerHeight} from './domFns';\n\nimport type Draggable from '../Draggable';\nimport type {Bounds, ControlPosition, DraggableData, MouseTouchEvent} from './types';\nimport type DraggableCore from '../DraggableCore';\n\nexport function getBoundPosition(draggable: Draggable, x: number, y: number): [number, number] {\n  // If no bounds, short-circuit and move on\n  if (!draggable.props.bounds) return [x, y];\n\n  // Clone new bounds\n  let {bounds} = draggable.props;\n  bounds = typeof bounds === 'string' ? bounds : cloneBounds(bounds);\n  const node = findDOMNode(draggable);\n\n  if (typeof bounds === 'string') {\n    const {ownerDocument} = node;\n    const ownerWindow = ownerDocument.defaultView;\n    let boundNode;\n    if (bounds === 'parent') {\n      boundNode = node.parentNode;\n    } else {\n      boundNode = ownerDocument.querySelector(bounds);\n    }\n    if (!(boundNode instanceof ownerWindow.HTMLElement)) {\n      throw new Error('Bounds selector \"' + bounds + '\" could not find an element.');\n    }\n    const nodeStyle = ownerWindow.getComputedStyle(node);\n    const boundNodeStyle = ownerWindow.getComputedStyle(boundNode);\n    // Compute bounds. This is a pain with padding and offsets but this gets it exactly right.\n    bounds = {\n      left: -node.offsetLeft + int(boundNodeStyle.paddingLeft) + int(nodeStyle.marginLeft),\n      top: -node.offsetTop + int(boundNodeStyle.paddingTop) + int(nodeStyle.marginTop),\n      right: innerWidth(boundNode) - outerWidth(node) - node.offsetLeft +\n        int(boundNodeStyle.paddingRight) - int(nodeStyle.marginRight),\n      bottom: innerHeight(boundNode) - outerHeight(node) - node.offsetTop +\n        int(boundNodeStyle.paddingBottom) - int(nodeStyle.marginBottom)\n    };\n  }\n\n  // Keep x and y below right and bottom limits...\n  if (isNum(bounds.right)) x = Math.min(x, bounds.right);\n  if (isNum(bounds.bottom)) y = Math.min(y, bounds.bottom);\n\n  // But above left and top limits.\n  if (isNum(bounds.left)) x = Math.max(x, bounds.left);\n  if (isNum(bounds.top)) y = Math.max(y, bounds.top);\n\n  return [x, y];\n}\n\nexport function snapToGrid(grid: [number, number], pendingX: number, pendingY: number): [number, number] {\n  const x = Math.round(pendingX / grid[0]) * grid[0];\n  const y = Math.round(pendingY / grid[1]) * grid[1];\n  return [x, y];\n}\n\nexport function canDragX(draggable: Draggable): boolean {\n  return draggable.props.axis === 'both' || draggable.props.axis === 'x';\n}\n\nexport function canDragY(draggable: Draggable): boolean {\n  return draggable.props.axis === 'both' || draggable.props.axis === 'y';\n}\n\n// Get {x, y} positions from event.\nexport function getControlPosition(e: MouseTouchEvent, touchIdentifier: ?number, draggableCore: DraggableCore): ?ControlPosition {\n  const touchObj = typeof touchIdentifier === 'number' ? getTouch(e, touchIdentifier) : null;\n  if (typeof touchIdentifier === 'number' && !touchObj) return null; // not the right touch\n  const node = findDOMNode(draggableCore);\n  // User can provide an offsetParent if desired.\n  const offsetParent = draggableCore.props.offsetParent || node.offsetParent || node.ownerDocument.body;\n  return offsetXYFromParent(touchObj || e, offsetParent, draggableCore.props.scale);\n}\n\n// Create an data object exposed by <DraggableCore>'s events\nexport function createCoreData(draggable: DraggableCore, x: number, y: number): DraggableData {\n  const state = draggable.state;\n  const isStart = !isNum(state.lastX);\n  const node = findDOMNode(draggable);\n\n  if (isStart) {\n    // If this is our first move, use the x and y as last coords.\n    return {\n      node,\n      deltaX: 0, deltaY: 0,\n      lastX: x, lastY: y,\n      x, y,\n    };\n  } else {\n    // Otherwise calculate proper values.\n    return {\n      node,\n      deltaX: x - state.lastX, deltaY: y - state.lastY,\n      lastX: state.lastX, lastY: state.lastY,\n      x, y,\n    };\n  }\n}\n\n// Create an data exposed by <Draggable>'s events\nexport function createDraggableData(draggable: Draggable, coreData: DraggableData): DraggableData {\n  const scale = draggable.props.scale;\n  return {\n    node: coreData.node,\n    x: draggable.state.x + (coreData.deltaX / scale),\n    y: draggable.state.y + (coreData.deltaY / scale),\n    deltaX: (coreData.deltaX / scale),\n    deltaY: (coreData.deltaY / scale),\n    lastX: draggable.state.x,\n    lastY: draggable.state.y\n  };\n}\n\n// A lot faster than stringify/parse\nfunction cloneBounds(bounds: Bounds): Bounds {\n  return {\n    left: bounds.left,\n    top: bounds.top,\n    right: bounds.right,\n    bottom: bounds.bottom\n  };\n}\n\nfunction findDOMNode(draggable: Draggable | DraggableCore): HTMLElement {\n  const node = ReactDOM.findDOMNode(draggable);\n  if (!node) {\n    throw new Error('<DraggableCore>: Unmounted during event!');\n  }\n  // $FlowIgnore we can't assert on HTMLElement due to tests... FIXME\n  return node;\n}\n","// @flow\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ReactDOM from 'react-dom';\nimport {matchesSelectorAndParentsTo, addEvent, removeEvent, addUserSelectStyles, getTouchIdentifier,\n        removeUserSelectStyles, styleHacks} from './utils/domFns';\nimport {createCoreData, getControlPosition, snapToGrid} from './utils/positionFns';\nimport {dontSetMe} from './utils/shims';\nimport log from './utils/log';\n\nimport type {EventHandler, MouseTouchEvent} from './utils/types';\nimport type {Element as ReactElement} from 'react';\n\n// Simple abstraction for dragging events names.\nconst eventsFor = {\n  touch: {\n    start: 'touchstart',\n    move: 'touchmove',\n    stop: 'touchend'\n  },\n  mouse: {\n    start: 'mousedown',\n    move: 'mousemove',\n    stop: 'mouseup'\n  }\n};\n\n// Default to mouse events.\nlet dragEventFor = eventsFor.mouse;\n\ntype DraggableCoreState = {\n  dragging: boolean,\n  lastX: number,\n  lastY: number,\n  touchIdentifier: ?number\n};\n\nexport type DraggableBounds = {\n  left: number,\n  right: number,\n  top: number,\n  bottom: number,\n};\n\nexport type DraggableData = {\n  node: HTMLElement,\n  x: number, y: number,\n  deltaX: number, deltaY: number,\n  lastX: number, lastY: number,\n};\n\nexport type DraggableEventHandler = (e: MouseEvent, data: DraggableData) => void;\n\nexport type ControlPosition = {x: number, y: number};\nexport type PositionOffsetControlPosition = {x: number|string, y: number|string};\n\nexport type DraggableCoreProps = {\n  allowAnyClick: boolean,\n  cancel: string,\n  children: ReactElement<any>,\n  disabled: boolean,\n  enableUserSelectHack: boolean,\n  offsetParent: HTMLElement,\n  grid: [number, number],\n  handle: string,\n  onStart: DraggableEventHandler,\n  onDrag: DraggableEventHandler,\n  onStop: DraggableEventHandler,\n  onMouseDown: (e: MouseEvent) => void,\n  scale: number,\n};\n\n//\n// Define <DraggableCore>.\n//\n// <DraggableCore> is for advanced usage of <Draggable>. It maintains minimal internal state so it can\n// work well with libraries that require more control over the element.\n//\n\nexport default class DraggableCore extends React.Component<DraggableCoreProps, DraggableCoreState> {\n\n  static displayName = 'DraggableCore';\n\n  static propTypes = {\n    /**\n     * `allowAnyClick` allows dragging using any mouse button.\n     * By default, we only accept the left button.\n     *\n     * Defaults to `false`.\n     */\n    allowAnyClick: PropTypes.bool,\n\n    /**\n     * `disabled`, if true, stops the <Draggable> from dragging. All handlers,\n     * with the exception of `onMouseDown`, will not fire.\n     */\n    disabled: PropTypes.bool,\n\n    /**\n     * By default, we add 'user-select:none' attributes to the document body\n     * to prevent ugly text selection during drag. If this is causing problems\n     * for your app, set this to `false`.\n     */\n    enableUserSelectHack: PropTypes.bool,\n\n    /**\n     * `offsetParent`, if set, uses the passed DOM node to compute drag offsets\n     * instead of using the parent node.\n     */\n    offsetParent: function(props: DraggableCoreProps, propName: $Keys<DraggableCoreProps>) {\n      if (props[propName] && props[propName].nodeType !== 1) {\n        throw new Error('Draggable\\'s offsetParent must be a DOM Node.');\n      }\n    },\n\n    /**\n     * `grid` specifies the x and y that dragging should snap to.\n     */\n    grid: PropTypes.arrayOf(PropTypes.number),\n    \n    /**\n     * `handle` specifies a selector to be used as the handle that initiates drag.\n     *\n     * Example:\n     *\n     * ```jsx\n     *   let App = React.createClass({\n     *       render: function () {\n     *         return (\n     *            <Draggable handle=\".handle\">\n     *              <div>\n     *                  <div className=\"handle\">Click me to drag</div>\n     *                  <div>This is some other content</div>\n     *              </div>\n     *           </Draggable>\n     *         );\n     *       }\n     *   });\n     * ```\n     */\n    handle: PropTypes.string,\n\n    /**\n     * `cancel` specifies a selector to be used to prevent drag initialization.\n     *\n     * Example:\n     *\n     * ```jsx\n     *   let App = React.createClass({\n     *       render: function () {\n     *           return(\n     *               <Draggable cancel=\".cancel\">\n     *                   <div>\n     *                     <div className=\"cancel\">You can't drag from here</div>\n     *                     <div>Dragging here works fine</div>\n     *                   </div>\n     *               </Draggable>\n     *           );\n     *       }\n     *   });\n     * ```\n     */\n    cancel: PropTypes.string,\n\n    /**\n     * Called when dragging starts.\n     * If this function returns the boolean false, dragging will be canceled.\n     */\n    onStart: PropTypes.func,\n\n    /**\n     * Called while dragging.\n     * If this function returns the boolean false, dragging will be canceled.\n     */\n    onDrag: PropTypes.func,\n\n    /**\n     * Called when dragging stops.\n     * If this function returns the boolean false, the drag will remain active.\n     */\n    onStop: PropTypes.func,\n\n    /**\n     * A workaround option which can be passed if onMouseDown needs to be accessed,\n     * since it'll always be blocked (as there is internal use of onMouseDown)\n     */\n    onMouseDown: PropTypes.func,\n\n    /**\n     * `scale`, if set, applies scaling while dragging an element\n     */\n    scale: PropTypes.number,\n\n    /**\n     * These properties should be defined on the child, not here.\n     */\n    className: dontSetMe,\n    style: dontSetMe,\n    transform: dontSetMe\n  };\n\n  static defaultProps = {\n    allowAnyClick: false, // by default only accept left click\n    cancel: null,\n    disabled: false,\n    enableUserSelectHack: true,\n    offsetParent: null,\n    handle: null,\n    grid: null,\n    transform: null,\n    onStart: function(){},\n    onDrag: function(){},\n    onStop: function(){},\n    onMouseDown: function(){},\n    scale: 1,\n  };\n\n  state = {\n    dragging: false,\n    // Used while dragging to determine deltas.\n    lastX: NaN, lastY: NaN,\n    touchIdentifier: null\n  };\n\n  componentWillUnmount() {\n    // Remove any leftover event handlers. Remove both touch and mouse handlers in case\n    // some browser quirk caused a touch event to fire during a mouse move, or vice versa.\n    const thisNode = ReactDOM.findDOMNode(this);\n    if (thisNode) {\n      const {ownerDocument} = thisNode;\n      removeEvent(ownerDocument, eventsFor.mouse.move, this.handleDrag);\n      removeEvent(ownerDocument, eventsFor.touch.move, this.handleDrag);\n      removeEvent(ownerDocument, eventsFor.mouse.stop, this.handleDragStop);\n      removeEvent(ownerDocument, eventsFor.touch.stop, this.handleDragStop);\n      if (this.props.enableUserSelectHack) removeUserSelectStyles(ownerDocument);\n    }\n  }\n\n  handleDragStart: EventHandler<MouseTouchEvent> = (e) => {\n    // Make it possible to attach event handlers on top of this one.\n    this.props.onMouseDown(e);\n\n    // Only accept left-clicks.\n    if (!this.props.allowAnyClick && typeof e.button === 'number' && e.button !== 0) return false;\n\n    // Get nodes. Be sure to grab relative document (could be iframed)\n    const thisNode = ReactDOM.findDOMNode(this);\n    if (!thisNode || !thisNode.ownerDocument || !thisNode.ownerDocument.body) {\n      throw new Error('<DraggableCore> not mounted on DragStart!');\n    }\n    const {ownerDocument} = thisNode;\n\n    // Short circuit if handle or cancel prop was provided and selector doesn't match.\n    if (this.props.disabled ||\n      (!(e.target instanceof ownerDocument.defaultView.Node)) ||\n      (this.props.handle && !matchesSelectorAndParentsTo(e.target, this.props.handle, thisNode)) ||\n      (this.props.cancel && matchesSelectorAndParentsTo(e.target, this.props.cancel, thisNode))) {\n      return;\n    }\n\n    // Set touch identifier in component state if this is a touch event. This allows us to\n    // distinguish between individual touches on multitouch screens by identifying which\n    // touchpoint was set to this element.\n    const touchIdentifier = getTouchIdentifier(e);\n    this.setState({touchIdentifier});\n\n    // Get the current drag point from the event. This is used as the offset.\n    const position = getControlPosition(e, touchIdentifier, this);\n    if (position == null) return; // not possible but satisfies flow\n    const {x, y} = position;\n\n    // Create an event object with all the data parents need to make a decision here.\n    const coreEvent = createCoreData(this, x, y);\n\n    log('DraggableCore: handleDragStart: %j', coreEvent);\n\n    // Call event handler. If it returns explicit false, cancel.\n    log('calling', this.props.onStart);\n    const shouldUpdate = this.props.onStart(e, coreEvent);\n    if (shouldUpdate === false) return;\n\n    // Add a style to the body to disable user-select. This prevents text from\n    // being selected all over the page.\n    if (this.props.enableUserSelectHack) addUserSelectStyles(ownerDocument);\n\n    // Initiate dragging. Set the current x and y as offsets\n    // so we know how much we've moved during the drag. This allows us\n    // to drag elements around even if they have been moved, without issue.\n    this.setState({\n      dragging: true,\n\n      lastX: x,\n      lastY: y\n    });\n\n    // Add events to the document directly so we catch when the user's mouse/touch moves outside of\n    // this element. We use different events depending on whether or not we have detected that this\n    // is a touch-capable device.\n    addEvent(ownerDocument, dragEventFor.move, this.handleDrag);\n    addEvent(ownerDocument, dragEventFor.stop, this.handleDragStop);\n  };\n\n  handleDrag: EventHandler<MouseTouchEvent> = (e) => {\n\n    // Prevent scrolling on mobile devices, like ipad/iphone.\n    if (e.type === 'touchmove') e.preventDefault();\n\n    // Get the current drag point from the event. This is used as the offset.\n    const position = getControlPosition(e, this.state.touchIdentifier, this);\n    if (position == null) return;\n    let {x, y} = position;\n\n    // Snap to grid if prop has been provided\n    if (Array.isArray(this.props.grid)) {\n      let deltaX = x - this.state.lastX, deltaY = y - this.state.lastY;\n      [deltaX, deltaY] = snapToGrid(this.props.grid, deltaX, deltaY);\n      if (!deltaX && !deltaY) return; // skip useless drag\n      x = this.state.lastX + deltaX, y = this.state.lastY + deltaY;\n    }\n\n    const coreEvent = createCoreData(this, x, y);\n\n    log('DraggableCore: handleDrag: %j', coreEvent);\n\n    // Call event handler. If it returns explicit false, trigger end.\n    const shouldUpdate = this.props.onDrag(e, coreEvent);\n    if (shouldUpdate === false) {\n      try {\n        // $FlowIgnore\n        this.handleDragStop(new MouseEvent('mouseup'));\n      } catch (err) {\n        // Old browsers\n        const event = ((document.createEvent('MouseEvents'): any): MouseTouchEvent);\n        // I see why this insanity was deprecated\n        // $FlowIgnore\n        event.initMouseEvent('mouseup', true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n        this.handleDragStop(event);\n      }\n      return;\n    }\n\n    this.setState({\n      lastX: x,\n      lastY: y\n    });\n  };\n\n  handleDragStop: EventHandler<MouseTouchEvent> = (e) => {\n    if (!this.state.dragging) return;\n\n    const position = getControlPosition(e, this.state.touchIdentifier, this);\n    if (position == null) return;\n    const {x, y} = position;\n    const coreEvent = createCoreData(this, x, y);\n\n    const thisNode = ReactDOM.findDOMNode(this);\n    if (thisNode) {\n      // Remove user-select hack\n      if (this.props.enableUserSelectHack) removeUserSelectStyles(thisNode.ownerDocument);\n    }\n\n    log('DraggableCore: handleDragStop: %j', coreEvent);\n\n    // Reset the el.\n    this.setState({\n      dragging: false,\n      lastX: NaN,\n      lastY: NaN\n    });\n\n    // Call event handler\n    this.props.onStop(e, coreEvent);\n\n    if (thisNode) {\n      // Remove event handlers\n      log('DraggableCore: Removing handlers');\n      removeEvent(thisNode.ownerDocument, dragEventFor.move, this.handleDrag);\n      removeEvent(thisNode.ownerDocument, dragEventFor.stop, this.handleDragStop);\n    }\n  };\n\n  onMouseDown: EventHandler<MouseTouchEvent> = (e) => {\n    dragEventFor = eventsFor.mouse; // on touchscreen laptops we could switch back to mouse\n\n    return this.handleDragStart(e);\n  };\n\n  onMouseUp: EventHandler<MouseTouchEvent> = (e) => {\n    dragEventFor = eventsFor.mouse;\n\n    return this.handleDragStop(e);\n  };\n\n  // Same as onMouseDown (start drag), but now consider this a touch device.\n  onTouchStart: EventHandler<MouseTouchEvent> = (e) => {\n    // We're on a touch device now, so change the event handlers\n    dragEventFor = eventsFor.touch;\n\n    return this.handleDragStart(e);\n  };\n\n  onTouchEnd: EventHandler<MouseTouchEvent> = (e) => {\n    // We're on a touch device now, so change the event handlers\n    dragEventFor = eventsFor.touch;\n\n    return this.handleDragStop(e);\n  };\n\n  render() {\n    // Reuse the child provided\n    // This makes it flexible to use whatever element is wanted (div, ul, etc)\n    return React.cloneElement(React.Children.only(this.props.children), {\n      style: styleHacks(this.props.children.props.style),\n\n      // Note: mouseMove handler is attached to document so it will still function\n      // when the user drags quickly and leaves the bounds of the element.\n      onMouseDown: this.onMouseDown,\n      onTouchStart: this.onTouchStart,\n      onMouseUp: this.onMouseUp,\n      onTouchEnd: this.onTouchEnd\n    });\n  }\n}\n","// @flow\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ReactDOM from 'react-dom';\nimport classNames from 'classnames';\nimport {createCSSTransform, createSVGTransform} from './utils/domFns';\nimport {canDragX, canDragY, createDraggableData, getBoundPosition} from './utils/positionFns';\nimport {dontSetMe} from './utils/shims';\nimport DraggableCore from './DraggableCore';\nimport type {ControlPosition, PositionOffsetControlPosition, DraggableBounds, DraggableCoreProps} from './DraggableCore';\nimport log from './utils/log';\nimport type {DraggableEventHandler} from './utils/types';\nimport type {Element as ReactElement} from 'react';\n\ntype DraggableState = {\n  dragging: boolean,\n  dragged: boolean,\n  x: number, y: number,\n  slackX: number, slackY: number,\n  isElementSVG: boolean,\n  prevPropsPosition: ?ControlPosition,\n};\n\nexport type DraggableProps = {\n  ...$Exact<DraggableCoreProps>,\n  axis: 'both' | 'x' | 'y' | 'none',\n  bounds: DraggableBounds | string | false,\n  defaultClassName: string,\n  defaultClassNameDragging: string,\n  defaultClassNameDragged: string,\n  defaultPosition: ControlPosition,\n  positionOffset: PositionOffsetControlPosition,\n  position: ControlPosition,\n  scale: number\n};\n\n//\n// Define <Draggable>\n//\n\nclass Draggable extends React.Component<DraggableProps, DraggableState> {\n\n  static displayName = 'Draggable';\n\n  static propTypes = {\n    // Accepts all props <DraggableCore> accepts.\n    ...DraggableCore.propTypes,\n\n    /**\n     * `axis` determines which axis the draggable can move.\n     *\n     *  Note that all callbacks will still return data as normal. This only\n     *  controls flushing to the DOM.\n     *\n     * 'both' allows movement horizontally and vertically.\n     * 'x' limits movement to horizontal axis.\n     * 'y' limits movement to vertical axis.\n     * 'none' limits all movement.\n     *\n     * Defaults to 'both'.\n     */\n    axis: PropTypes.oneOf(['both', 'x', 'y', 'none']),\n\n    /**\n     * `bounds` determines the range of movement available to the element.\n     * Available values are:\n     *\n     * 'parent' restricts movement within the Draggable's parent node.\n     *\n     * Alternatively, pass an object with the following properties, all of which are optional:\n     *\n     * {left: LEFT_BOUND, right: RIGHT_BOUND, bottom: BOTTOM_BOUND, top: TOP_BOUND}\n     *\n     * All values are in px.\n     *\n     * Example:\n     *\n     * ```jsx\n     *   let App = React.createClass({\n     *       render: function () {\n     *         return (\n     *            <Draggable bounds={{right: 300, bottom: 300}}>\n     *              <div>Content</div>\n     *           </Draggable>\n     *         );\n     *       }\n     *   });\n     * ```\n     */\n    bounds: PropTypes.oneOfType([\n      PropTypes.shape({\n        left: PropTypes.number,\n        right: PropTypes.number,\n        top: PropTypes.number,\n        bottom: PropTypes.number\n      }),\n      PropTypes.string,\n      PropTypes.oneOf([false])\n    ]),\n\n    defaultClassName: PropTypes.string,\n    defaultClassNameDragging: PropTypes.string,\n    defaultClassNameDragged: PropTypes.string,\n\n    /**\n     * `defaultPosition` specifies the x and y that the dragged item should start at\n     *\n     * Example:\n     *\n     * ```jsx\n     *      let App = React.createClass({\n     *          render: function () {\n     *              return (\n     *                  <Draggable defaultPosition={{x: 25, y: 25}}>\n     *                      <div>I start with transformX: 25px and transformY: 25px;</div>\n     *                  </Draggable>\n     *              );\n     *          }\n     *      });\n     * ```\n     */\n    defaultPosition: PropTypes.shape({\n      x: PropTypes.number,\n      y: PropTypes.number\n    }),\n    positionOffset: PropTypes.shape({\n      x: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n      y: PropTypes.oneOfType([PropTypes.number, PropTypes.string])\n    }),\n\n    /**\n     * `position`, if present, defines the current position of the element.\n     *\n     *  This is similar to how form elements in React work - if no `position` is supplied, the component\n     *  is uncontrolled.\n     *\n     * Example:\n     *\n     * ```jsx\n     *      let App = React.createClass({\n     *          render: function () {\n     *              return (\n     *                  <Draggable position={{x: 25, y: 25}}>\n     *                      <div>I start with transformX: 25px and transformY: 25px;</div>\n     *                  </Draggable>\n     *              );\n     *          }\n     *      });\n     * ```\n     */\n    position: PropTypes.shape({\n      x: PropTypes.number,\n      y: PropTypes.number\n    }),\n\n    /**\n     * These properties should be defined on the child, not here.\n     */\n    className: dontSetMe,\n    style: dontSetMe,\n    transform: dontSetMe\n  };\n\n  static defaultProps = {\n    ...DraggableCore.defaultProps,\n    axis: 'both',\n    bounds: false,\n    defaultClassName: 'react-draggable',\n    defaultClassNameDragging: 'react-draggable-dragging',\n    defaultClassNameDragged: 'react-draggable-dragged',\n    defaultPosition: {x: 0, y: 0},\n    position: null,\n    scale: 1\n  };\n\n  // React 16.3+\n  // Arity (props, state)\n  static getDerivedStateFromProps({position}: DraggableProps, {prevPropsPosition}: DraggableState) {\n    // Set x/y if a new position is provided in props that is different than the previous.\n    if (\n      position &&\n      (!prevPropsPosition || \n        position.x !== prevPropsPosition.x || position.y !== prevPropsPosition.y\n      )\n    ) {\n      log('Draggable: getDerivedStateFromProps %j', {position, prevPropsPosition});\n      return {\n        x: position.x, \n        y: position.y, \n        prevPropsPosition: {...position}\n      };\n    }\n    return null;\n  }\n\n  constructor(props: DraggableProps) {\n    super(props);\n\n    this.state = {\n      // Whether or not we are currently dragging.\n      dragging: false,\n\n      // Whether or not we have been dragged before.\n      dragged: false,\n\n      // Current transform x and y.\n      x: props.position ? props.position.x : props.defaultPosition.x,\n      y: props.position ? props.position.y : props.defaultPosition.y,\n\n      prevPropsPosition: {...props.position},\n\n      // Used for compensating for out-of-bounds drags\n      slackX: 0, slackY: 0,\n\n      // Can only determine if SVG after mounting\n      isElementSVG: false\n    };\n\n    if (props.position && !(props.onDrag || props.onStop)) {\n      // eslint-disable-next-line no-console\n      console.warn('A `position` was applied to this <Draggable>, without drag handlers. This will make this ' +\n        'component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the ' +\n        '`position` of this element.');\n    }\n  }\n\n  componentDidMount() {\n    // Check to see if the element passed is an instanceof SVGElement\n    if(typeof window.SVGElement !== 'undefined' && ReactDOM.findDOMNode(this) instanceof window.SVGElement) {\n      this.setState({isElementSVG: true});\n    }\n  }\n\n  componentWillUnmount() {\n    this.setState({dragging: false}); // prevents invariant if unmounted while dragging\n  }\n\n  onDragStart: DraggableEventHandler = (e, coreData) => {\n    log('Draggable: onDragStart: %j', coreData);\n\n    // Short-circuit if user's callback killed it.\n    const shouldStart = this.props.onStart(e, createDraggableData(this, coreData));\n    // Kills start event on core as well, so move handlers are never bound.\n    if (shouldStart === false) return false;\n\n    this.setState({dragging: true, dragged: true});\n  };\n\n  onDrag: DraggableEventHandler = (e, coreData) => {\n    if (!this.state.dragging) return false;\n    log('Draggable: onDrag: %j', coreData);\n\n    const uiData = createDraggableData(this, coreData);\n\n    const newState: $Shape<DraggableState> = {\n      x: uiData.x,\n      y: uiData.y\n    };\n\n    // Keep within bounds.\n    if (this.props.bounds) {\n      // Save original x and y.\n      const {x, y} = newState;\n\n      // Add slack to the values used to calculate bound position. This will ensure that if\n      // we start removing slack, the element won't react to it right away until it's been\n      // completely removed.\n      newState.x += this.state.slackX;\n      newState.y += this.state.slackY;\n\n      // Get bound position. This will ceil/floor the x and y within the boundaries.\n      const [newStateX, newStateY] = getBoundPosition(this, newState.x, newState.y);\n      newState.x = newStateX;\n      newState.y = newStateY;\n\n      // Recalculate slack by noting how much was shaved by the boundPosition handler.\n      newState.slackX = this.state.slackX + (x - newState.x);\n      newState.slackY = this.state.slackY + (y - newState.y);\n\n      // Update the event we fire to reflect what really happened after bounds took effect.\n      uiData.x = newState.x;\n      uiData.y = newState.y;\n      uiData.deltaX = newState.x - this.state.x;\n      uiData.deltaY = newState.y - this.state.y;\n    }\n\n    // Short-circuit if user's callback killed it.\n    const shouldUpdate = this.props.onDrag(e, uiData);\n    if (shouldUpdate === false) return false;\n\n    this.setState(newState);\n  };\n\n  onDragStop: DraggableEventHandler = (e, coreData) => {\n    if (!this.state.dragging) return false;\n\n    // Short-circuit if user's callback killed it.\n    const shouldStop = this.props.onStop(e, createDraggableData(this, coreData));\n    if (shouldStop === false) return false;\n\n    log('Draggable: onDragStop: %j', coreData);\n\n    const newState: $Shape<DraggableState> = {\n      dragging: false,\n      slackX: 0,\n      slackY: 0\n    };\n\n    // If this is a controlled component, the result of this operation will be to\n    // revert back to the old position. We expect a handler on `onDragStop`, at the least.\n    const controlled = Boolean(this.props.position);\n    if (controlled) {\n      const {x, y} = this.props.position;\n      newState.x = x;\n      newState.y = y;\n    }\n\n    this.setState(newState);\n  };\n\n  render(): ReactElement<any> {\n    const {\n      axis,\n      bounds,\n      children,\n      defaultPosition,\n      defaultClassName,\n      defaultClassNameDragging,\n      defaultClassNameDragged,\n      position,\n      positionOffset,\n      scale,\n      ...draggableCoreProps\n    } = this.props;\n\n    let style = {};\n    let svgTransform = null;\n\n    // If this is controlled, we don't want to move it - unless it's dragging.\n    const controlled = Boolean(position);\n    const draggable = !controlled || this.state.dragging;\n\n    const validPosition = position || defaultPosition;\n    const transformOpts = {\n      // Set left if horizontal drag is enabled\n      x: canDragX(this) && draggable ?\n        this.state.x :\n        validPosition.x,\n\n      // Set top if vertical drag is enabled\n      y: canDragY(this) && draggable ?\n        this.state.y :\n        validPosition.y\n    };\n\n    // If this element was SVG, we use the `transform` attribute.\n    if (this.state.isElementSVG) {\n      svgTransform = createSVGTransform(transformOpts, positionOffset);\n    } else {\n      // Add a CSS transform to move the element around. This allows us to move the element around\n      // without worrying about whether or not it is relatively or absolutely positioned.\n      // If the item you are dragging already has a transform set, wrap it in a <span> so <Draggable>\n      // has a clean slate.\n      style = createCSSTransform(transformOpts, positionOffset);\n    }\n\n    // Mark with class while dragging\n    const className = classNames((children.props.className || ''), defaultClassName, {\n      [defaultClassNameDragging]: this.state.dragging,\n      [defaultClassNameDragged]: this.state.dragged\n    });\n\n    // Reuse the child provided\n    // This makes it flexible to use whatever element is wanted (div, ul, etc)\n    return (\n      <DraggableCore {...draggableCoreProps} onStart={this.onDragStart} onDrag={this.onDrag} onStop={this.onDragStop}>\n        {React.cloneElement(React.Children.only(children), {\n          className: className,\n          style: {...children.props.style, ...style},\n          transform: svgTransform\n        })}\n      </DraggableCore>\n    );\n  }\n}\n\nexport {Draggable as default, DraggableCore};\n","\nimport * as React from \"react\";\n\n\nexport type NavButtonProperties = {\n\tpaged:boolean, \n\tboard:string,\n\tconfirmUpdateClick: (time_since_last_update:string, max_time:number)=>void,\n\ttime_string:string\n}\n\ntype NavButtonVariables = {}\n\n// FIX: expansion doesn't updates the paged property when new treads have been added.\nexport class NavButtons extends React.Component<NavButtonProperties, NavButtonVariables>{\n\t\n\tconstructor(props:any){\n\t\tsuper(props);\n\t\tthis.state=({paged:false, board:\"\"});\n\n\t\tthis.checkThreadUpdates = this.checkThreadUpdates.bind(this);\n\t\tthis.fetchThreadTimeJSON = this.fetchThreadTimeJSON.bind(this);\n\t}\n\n\n\tcomponentDidMount(){\n\t\tthis.checkThreadUpdates();\n\t}\n\n// return a time to parent to pass down to child\n/* \n   Time save by only scanning first page for greatest time. \n   Hides issue with useless position based sorting of threads.json.\n   Unlikley any board will have a page of stickies.\n*/\n\tasync checkThreadUpdates(){\n\t\tthis.fetchThreadTimeJSON(this.props.board)\n\t\t\t.then((recieved:string)=>{\n\t\t\t\tlet thread_json = JSON.parse(recieved);\n\t\t\t\tlet max_time = 0;\t\t\t\n\t\t\t\tthread_json[0][\"threads\"].forEach(function(json_el:any){\n\t\t\t\t\tif(json_el['last_modified'] > max_time){\n\t\t\t\t\t\tmax_time = json_el['last_modified'];\n\t\t\t\t\t}\t\n\t\t\t\t});\n\t\t\t\tlet time_string = \"\";\nconsole.log(((Date.now()/1000 - max_time) / (60*60*24)));console.log(((Date.now()/1000 - max_time)));\n\t\t\t\tif(((Date.now()/1000 - max_time) / (60*60*24*30*12)) > 1 ){\n\t\t\t\t\ttime_string = Math.floor((Date.now()/1000 - max_time / (60*60*24*30*12))) + \" year\";\t\t\t\n\t\t\t\t}\n\t\t\t\telse if(((Date.now()/1000 - max_time) / (60*60*24*30)) > 1 ){\n\t\t\t\t\ttime_string = Math.floor(((Date.now()/1000 - max_time) / (60*60*24*30))) + \" month\";\t\t\t\n\t\t\t\t}\n\t\t\t\telse if(((Date.now()/1000 - max_time) / (60*60*24)) > 1 ){\n\t\t\t\t\ttime_string = Math.floor(((Date.now()/1000 - max_time) / (60*60*24))) + \" day\";\t\t\t\n\t\t\t\t}\n\t\t\t\telse if(((Date.now()/1000 - max_time) / (60*60)) > 1 ){\n\t\t\t\t\ttime_string = Math.floor(((Date.now()/1000 - max_time) / (60*60))) + \" hour\";\t\t\t\n\t\t\t\t}\n\t\t\t\telse if(((Date.now()/1000 - max_time) / (60)) > 1 ){\n\t\t\t\t\ttime_string = Math.floor(((Date.now()/1000 - max_time) / (60))) + \" minute\";\t\t\t\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\ttime_string =  Math.floor(Date.now()/1000 - max_time) + \" second\";\t\n\t\t\t\t}\n\t\t\t\tif(time_string.substring(0, time_string.indexOf(\" \")).length > 1 || parseInt(time_string[0]) > 1){\n\t\t\t\t\ttime_string += \"s\"\n\t\t\t\t}\n\t\t\t\tconsole.log(time_string);\n\t\t\t\tthis.props.confirmUpdateClick(time_string, max_time);\n\t\t\t})\n\t\t\t.catch((err)=>{\n\t\t\t\tconsole.log(err);\n\t\t\t\t//this.setState({error: err + \"\\nJSON fetchError\"});\n\t\t\t});\n\t}\n\t\n\tfetchThreadTimeJSON(board:string){\nconsole.log('f');\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tvar xhr_thread_details = new XMLHttpRequest();\n\t\t\txhr_thread_details.addEventListener(\"load\", function(re:ProgressEvent<XMLHttpRequestEventTarget>){\n\t\t\t\tif(this.status >= 300) \n\t\t\t\t\treject(this.status);\n\t\t\t\telse\n\t\t\t\t\tresolve(this.response);\n\t\t\t});\n\t\t\txhr_thread_details.addEventListener(\"error\", function(err:ProgressEvent<XMLHttpRequestEventTarget>){\n\t\t\t\treject(this.status);\n\t\t\t});\n\t\t\txhr_thread_details.open(\"GET\", `/${board}/threads.json`);\n\t\t\txhr_thread_details.send();\n\t\t});\n\t}\n\n\trender(){\n\t\treturn <span className=\"nav-links\">\n\t\t\t  {!this.props.paged && <a href={\"/\" + this.props.board +\"/\"} className=\"return\">[Return]</a> }&nbsp;\n\t\t\t  {this.props.paged && <a title= \"Click to Update\" style={{cursor:\"pointer\", textDecoration: \"none\"}} className=\"index-updater\" onClick={this.checkThreadUpdates}>[{this.props.time_string}]</a> }&nbsp;\n\t\t\t  <a href={\"/\" + this.props.board + \"/catalog\"}>[Catalog]</a>&nbsp;\n\t\t\t  <a href=\"archive\">[Archive]</a>&nbsp;\n\t\t     </span>\n\t}\n\n}\n\n"],"sourceRoot":""}